(ns adventofcode.2018.day16
  (:require [clojure.string :as str]
            [clojure.edn :as edn]
            [adventofcode.utils :as u]
            [clojure.set :as set]))

(set! *print-length* 40)

(def input "Before: [1, 2, 3, 2]\n3 1 3 0\nAfter:  [1, 2, 3, 2]\n\nBefore: [1, 1, 1, 3]\n5 1 3 0\nAfter:  [3, 1, 1, 3]\n\nBefore: [2, 3, 0, 2]\n0 1 0 2\nAfter:  [2, 3, 6, 2]\n\nBefore: [1, 2, 2, 3]\n11 0 3 3\nAfter:  [1, 2, 2, 0]\n\nBefore: [0, 0, 3, 3]\n9 0 0 1\nAfter:  [0, 0, 3, 3]\n\nBefore: [1, 0, 1, 2]\n10 1 2 0\nAfter:  [1, 0, 1, 2]\n\nBefore: [0, 2, 0, 2]\n13 1 1 1\nAfter:  [0, 1, 0, 2]\n\nBefore: [3, 1, 1, 1]\n6 1 0 1\nAfter:  [3, 3, 1, 1]\n\nBefore: [2, 3, 2, 0]\n4 1 2 2\nAfter:  [2, 3, 1, 0]\n\nBefore: [1, 2, 0, 2]\n3 1 3 2\nAfter:  [1, 2, 1, 2]\n\nBefore: [0, 1, 3, 3]\n2 1 0 2\nAfter:  [0, 1, 1, 3]\n\nBefore: [0, 3, 1, 3]\n6 2 1 2\nAfter:  [0, 3, 3, 3]\n\nBefore: [3, 1, 1, 1]\n6 1 0 2\nAfter:  [3, 1, 3, 1]\n\nBefore: [0, 2, 3, 2]\n3 1 3 0\nAfter:  [1, 2, 3, 2]\n\nBefore: [0, 0, 1, 3]\n7 2 1 0\nAfter:  [1, 0, 1, 3]\n\nBefore: [3, 1, 2, 3]\n15 2 3 1\nAfter:  [3, 3, 2, 3]\n\nBefore: [3, 2, 3, 2]\n3 1 3 3\nAfter:  [3, 2, 3, 1]\n\nBefore: [0, 2, 1, 2]\n3 1 3 0\nAfter:  [1, 2, 1, 2]\n\nBefore: [1, 0, 1, 1]\n1 1 0 1\nAfter:  [1, 1, 1, 1]\n\nBefore: [3, 2, 2, 2]\n3 1 3 1\nAfter:  [3, 1, 2, 2]\n\nBefore: [2, 3, 2, 3]\n8 2 2 3\nAfter:  [2, 3, 2, 4]\n\nBefore: [2, 1, 0, 2]\n8 0 1 0\nAfter:  [3, 1, 0, 2]\n\nBefore: [1, 1, 2, 3]\n5 0 3 1\nAfter:  [1, 3, 2, 3]\n\nBefore: [1, 0, 3, 1]\n1 1 0 0\nAfter:  [1, 0, 3, 1]\n\nBefore: [0, 1, 3, 1]\n14 3 2 1\nAfter:  [0, 3, 3, 1]\n\nBefore: [3, 3, 1, 1]\n0 1 0 1\nAfter:  [3, 9, 1, 1]\n\nBefore: [2, 3, 0, 3]\n15 0 3 2\nAfter:  [2, 3, 3, 3]\n\nBefore: [2, 2, 3, 3]\n15 1 3 2\nAfter:  [2, 2, 3, 3]\n\nBefore: [1, 1, 3, 2]\n12 0 2 3\nAfter:  [1, 1, 3, 3]\n\nBefore: [2, 1, 1, 3]\n15 0 3 3\nAfter:  [2, 1, 1, 3]\n\nBefore: [0, 2, 3, 2]\n9 0 0 2\nAfter:  [0, 2, 0, 2]\n\nBefore: [3, 2, 1, 0]\n6 2 0 0\nAfter:  [3, 2, 1, 0]\n\nBefore: [3, 3, 3, 2]\n13 1 0 0\nAfter:  [1, 3, 3, 2]\n\nBefore: [3, 2, 2, 3]\n8 2 2 3\nAfter:  [3, 2, 2, 4]\n\nBefore: [1, 0, 2, 3]\n1 1 0 2\nAfter:  [1, 0, 1, 3]\n\nBefore: [1, 0, 2, 0]\n8 2 2 2\nAfter:  [1, 0, 4, 0]\n\nBefore: [1, 3, 3, 2]\n12 0 2 1\nAfter:  [1, 3, 3, 2]\n\nBefore: [0, 1, 2, 2]\n2 1 0 2\nAfter:  [0, 1, 1, 2]\n\nBefore: [3, 0, 2, 3]\n0 3 0 0\nAfter:  [9, 0, 2, 3]\n\nBefore: [2, 0, 3, 1]\n7 3 1 3\nAfter:  [2, 0, 3, 1]\n\nBefore: [1, 2, 1, 3]\n10 1 0 0\nAfter:  [1, 2, 1, 3]\n\nBefore: [2, 3, 3, 0]\n4 1 0 2\nAfter:  [2, 3, 1, 0]\n\nBefore: [0, 1, 1, 2]\n2 1 0 3\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 0, 0, 2]\n7 0 1 1\nAfter:  [1, 1, 0, 2]\n\nBefore: [2, 3, 2, 2]\n4 1 2 1\nAfter:  [2, 1, 2, 2]\n\nBefore: [1, 2, 1, 0]\n13 1 1 2\nAfter:  [1, 2, 1, 0]\n\nBefore: [1, 0, 2, 2]\n1 1 0 2\nAfter:  [1, 0, 1, 2]\n\nBefore: [2, 2, 1, 3]\n11 0 3 2\nAfter:  [2, 2, 0, 3]\n\nBefore: [0, 1, 3, 1]\n2 1 0 0\nAfter:  [1, 1, 3, 1]\n\nBefore: [0, 1, 2, 2]\n2 1 0 1\nAfter:  [0, 1, 2, 2]\n\nBefore: [2, 3, 1, 1]\n6 2 1 1\nAfter:  [2, 3, 1, 1]\n\nBefore: [1, 2, 1, 0]\n10 1 0 1\nAfter:  [1, 1, 1, 0]\n\nBefore: [3, 1, 0, 3]\n5 1 3 3\nAfter:  [3, 1, 0, 3]\n\nBefore: [2, 1, 3, 1]\n12 1 2 0\nAfter:  [3, 1, 3, 1]\n\nBefore: [0, 0, 2, 3]\n10 0 1 0\nAfter:  [1, 0, 2, 3]\n\nBefore: [0, 1, 2, 0]\n2 1 0 1\nAfter:  [0, 1, 2, 0]\n\nBefore: [0, 1, 0, 3]\n5 1 3 1\nAfter:  [0, 3, 0, 3]\n\nBefore: [0, 1, 1, 1]\n2 1 0 0\nAfter:  [1, 1, 1, 1]\n\nBefore: [2, 0, 2, 1]\n7 3 1 2\nAfter:  [2, 0, 1, 1]\n\nBefore: [1, 0, 1, 0]\n7 2 1 1\nAfter:  [1, 1, 1, 0]\n\nBefore: [3, 2, 3, 3]\n15 1 3 1\nAfter:  [3, 3, 3, 3]\n\nBefore: [1, 2, 0, 3]\n10 1 0 0\nAfter:  [1, 2, 0, 3]\n\nBefore: [1, 2, 0, 0]\n13 1 1 3\nAfter:  [1, 2, 0, 1]\n\nBefore: [2, 3, 2, 3]\n0 1 0 2\nAfter:  [2, 3, 6, 3]\n\nBefore: [3, 3, 3, 1]\n13 1 0 1\nAfter:  [3, 1, 3, 1]\n\nBefore: [1, 2, 3, 1]\n14 3 2 2\nAfter:  [1, 2, 3, 1]\n\nBefore: [0, 0, 1, 3]\n8 0 3 1\nAfter:  [0, 3, 1, 3]\n\nBefore: [0, 2, 2, 3]\n0 3 1 2\nAfter:  [0, 2, 6, 3]\n\nBefore: [1, 1, 3, 3]\n5 0 3 2\nAfter:  [1, 1, 3, 3]\n\nBefore: [0, 1, 1, 0]\n2 1 0 2\nAfter:  [0, 1, 1, 0]\n\nBefore: [1, 0, 3, 0]\n1 1 0 0\nAfter:  [1, 0, 3, 0]\n\nBefore: [0, 1, 2, 0]\n2 1 0 0\nAfter:  [1, 1, 2, 0]\n\nBefore: [1, 1, 3, 2]\n14 3 1 1\nAfter:  [1, 3, 3, 2]\n\nBefore: [1, 3, 2, 2]\n6 0 1 1\nAfter:  [1, 3, 2, 2]\n\nBefore: [1, 0, 0, 2]\n1 1 0 1\nAfter:  [1, 1, 0, 2]\n\nBefore: [2, 3, 3, 0]\n4 1 0 3\nAfter:  [2, 3, 3, 1]\n\nBefore: [1, 0, 2, 1]\n10 1 3 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [2, 1, 1, 1]\n0 3 0 3\nAfter:  [2, 1, 1, 2]\n\nBefore: [1, 0, 0, 1]\n7 0 1 3\nAfter:  [1, 0, 0, 1]\n\nBefore: [2, 0, 0, 1]\n7 3 1 3\nAfter:  [2, 0, 0, 1]\n\nBefore: [2, 3, 3, 2]\n13 1 2 0\nAfter:  [1, 3, 3, 2]\n\nBefore: [2, 2, 0, 1]\n13 1 0 3\nAfter:  [2, 2, 0, 1]\n\nBefore: [2, 3, 1, 3]\n5 2 3 3\nAfter:  [2, 3, 1, 3]\n\nBefore: [3, 2, 3, 2]\n3 1 3 2\nAfter:  [3, 2, 1, 2]\n\nBefore: [1, 3, 3, 1]\n12 0 2 2\nAfter:  [1, 3, 3, 1]\n\nBefore: [1, 0, 1, 3]\n7 2 1 0\nAfter:  [1, 0, 1, 3]\n\nBefore: [1, 3, 2, 0]\n6 0 1 1\nAfter:  [1, 3, 2, 0]\n\nBefore: [2, 0, 3, 1]\n14 3 2 3\nAfter:  [2, 0, 3, 3]\n\nBefore: [0, 1, 3, 1]\n8 0 1 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [1, 1, 2, 3]\n15 2 3 2\nAfter:  [1, 1, 3, 3]\n\nBefore: [1, 2, 2, 2]\n3 1 3 3\nAfter:  [1, 2, 2, 1]\n\nBefore: [0, 1, 0, 2]\n2 1 0 1\nAfter:  [0, 1, 0, 2]\n\nBefore: [1, 2, 3, 3]\n5 0 3 2\nAfter:  [1, 2, 3, 3]\n\nBefore: [0, 0, 2, 0]\n8 2 2 1\nAfter:  [0, 4, 2, 0]\n\nBefore: [2, 3, 3, 1]\n0 0 2 1\nAfter:  [2, 6, 3, 1]\n\nBefore: [1, 0, 3, 2]\n12 0 2 1\nAfter:  [1, 3, 3, 2]\n\nBefore: [3, 1, 0, 3]\n5 1 3 0\nAfter:  [3, 1, 0, 3]\n\nBefore: [0, 0, 3, 1]\n10 0 1 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [3, 3, 0, 2]\n13 1 0 2\nAfter:  [3, 3, 1, 2]\n\nBefore: [1, 1, 0, 3]\n5 0 3 1\nAfter:  [1, 3, 0, 3]\n\nBefore: [3, 3, 3, 1]\n14 3 2 0\nAfter:  [3, 3, 3, 1]\n\nBefore: [1, 3, 2, 3]\n5 0 3 0\nAfter:  [3, 3, 2, 3]\n\nBefore: [1, 0, 0, 3]\n7 0 1 2\nAfter:  [1, 0, 1, 3]\n\nBefore: [2, 2, 3, 1]\n14 3 2 3\nAfter:  [2, 2, 3, 3]\n\nBefore: [0, 1, 3, 1]\n12 1 2 0\nAfter:  [3, 1, 3, 1]\n\nBefore: [0, 1, 2, 3]\n9 0 0 3\nAfter:  [0, 1, 2, 0]\n\nBefore: [1, 3, 2, 3]\n5 0 3 3\nAfter:  [1, 3, 2, 3]\n\nBefore: [0, 2, 2, 3]\n8 1 2 2\nAfter:  [0, 2, 4, 3]\n\nBefore: [2, 3, 3, 0]\n0 2 0 3\nAfter:  [2, 3, 3, 6]\n\nBefore: [2, 3, 3, 1]\n14 3 2 3\nAfter:  [2, 3, 3, 3]\n\nBefore: [3, 1, 2, 2]\n8 2 2 0\nAfter:  [4, 1, 2, 2]\n\nBefore: [2, 3, 3, 3]\n11 0 3 2\nAfter:  [2, 3, 0, 3]\n\nBefore: [2, 2, 3, 2]\n13 1 0 3\nAfter:  [2, 2, 3, 1]\n\nBefore: [3, 0, 3, 3]\n0 3 0 0\nAfter:  [9, 0, 3, 3]\n\nBefore: [2, 3, 2, 3]\n4 1 2 2\nAfter:  [2, 3, 1, 3]\n\nBefore: [0, 0, 1, 1]\n7 2 1 0\nAfter:  [1, 0, 1, 1]\n\nBefore: [1, 0, 3, 0]\n1 1 0 2\nAfter:  [1, 0, 1, 0]\n\nBefore: [0, 1, 2, 3]\n8 2 2 1\nAfter:  [0, 4, 2, 3]\n\nBefore: [0, 1, 3, 0]\n2 1 0 3\nAfter:  [0, 1, 3, 1]\n\nBefore: [3, 3, 3, 1]\n13 1 0 2\nAfter:  [3, 3, 1, 1]\n\nBefore: [0, 1, 3, 0]\n2 1 0 2\nAfter:  [0, 1, 1, 0]\n\nBefore: [0, 0, 3, 1]\n7 3 1 3\nAfter:  [0, 0, 3, 1]\n\nBefore: [1, 0, 3, 0]\n1 1 0 3\nAfter:  [1, 0, 3, 1]\n\nBefore: [0, 3, 1, 2]\n6 2 1 2\nAfter:  [0, 3, 3, 2]\n\nBefore: [2, 1, 1, 3]\n5 2 3 3\nAfter:  [2, 1, 1, 3]\n\nBefore: [2, 0, 0, 3]\n11 0 3 3\nAfter:  [2, 0, 0, 0]\n\nBefore: [1, 0, 2, 1]\n1 1 0 3\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 3, 2, 3]\n4 1 2 0\nAfter:  [1, 3, 2, 3]\n\nBefore: [0, 2, 1, 2]\n3 1 3 3\nAfter:  [0, 2, 1, 1]\n\nBefore: [0, 0, 0, 0]\n9 0 0 3\nAfter:  [0, 0, 0, 0]\n\nBefore: [1, 0, 3, 3]\n1 1 0 1\nAfter:  [1, 1, 3, 3]\n\nBefore: [1, 1, 3, 1]\n12 0 2 3\nAfter:  [1, 1, 3, 3]\n\nBefore: [2, 3, 0, 0]\n4 1 0 2\nAfter:  [2, 3, 1, 0]\n\nBefore: [0, 1, 2, 3]\n9 0 0 0\nAfter:  [0, 1, 2, 3]\n\nBefore: [1, 0, 0, 3]\n1 1 0 3\nAfter:  [1, 0, 0, 1]\n\nBefore: [2, 2, 2, 0]\n13 1 0 3\nAfter:  [2, 2, 2, 1]\n\nBefore: [3, 3, 3, 3]\n13 1 0 2\nAfter:  [3, 3, 1, 3]\n\nBefore: [1, 2, 1, 3]\n15 1 3 3\nAfter:  [1, 2, 1, 3]\n\nBefore: [1, 3, 2, 1]\n4 1 2 2\nAfter:  [1, 3, 1, 1]\n\nBefore: [3, 3, 3, 3]\n13 1 0 1\nAfter:  [3, 1, 3, 3]\n\nBefore: [1, 0, 1, 1]\n7 2 1 0\nAfter:  [1, 0, 1, 1]\n\nBefore: [2, 1, 0, 3]\n5 1 3 2\nAfter:  [2, 1, 3, 3]\n\nBefore: [1, 0, 1, 2]\n7 0 1 2\nAfter:  [1, 0, 1, 2]\n\nBefore: [2, 1, 3, 2]\n8 1 3 3\nAfter:  [2, 1, 3, 3]\n\nBefore: [1, 2, 2, 3]\n15 1 3 0\nAfter:  [3, 2, 2, 3]\n\nBefore: [1, 0, 2, 3]\n11 0 3 3\nAfter:  [1, 0, 2, 0]\n\nBefore: [1, 3, 2, 2]\n4 1 2 0\nAfter:  [1, 3, 2, 2]\n\nBefore: [2, 2, 2, 3]\n15 0 3 2\nAfter:  [2, 2, 3, 3]\n\nBefore: [3, 1, 3, 1]\n12 1 2 2\nAfter:  [3, 1, 3, 1]\n\nBefore: [1, 0, 2, 1]\n1 1 0 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [0, 3, 2, 0]\n0 2 1 2\nAfter:  [0, 3, 6, 0]\n\nBefore: [0, 2, 3, 2]\n13 1 1 0\nAfter:  [1, 2, 3, 2]\n\nBefore: [2, 3, 3, 2]\n4 1 0 2\nAfter:  [2, 3, 1, 2]\n\nBefore: [3, 3, 2, 1]\n4 1 2 1\nAfter:  [3, 1, 2, 1]\n\nBefore: [1, 3, 1, 2]\n8 2 3 3\nAfter:  [1, 3, 1, 3]\n\nBefore: [1, 3, 1, 1]\n6 0 1 0\nAfter:  [3, 3, 1, 1]\n\nBefore: [0, 3, 2, 1]\n14 3 2 2\nAfter:  [0, 3, 3, 1]\n\nBefore: [1, 0, 0, 3]\n1 1 0 0\nAfter:  [1, 0, 0, 3]\n\nBefore: [0, 0, 1, 1]\n10 0 1 2\nAfter:  [0, 0, 1, 1]\n\nBefore: [1, 1, 2, 2]\n8 2 2 0\nAfter:  [4, 1, 2, 2]\n\nBefore: [1, 2, 3, 2]\n3 1 3 1\nAfter:  [1, 1, 3, 2]\n\nBefore: [1, 2, 1, 2]\n10 1 0 1\nAfter:  [1, 1, 1, 2]\n\nBefore: [2, 3, 2, 0]\n4 1 0 1\nAfter:  [2, 1, 2, 0]\n\nBefore: [1, 0, 1, 0]\n1 1 0 1\nAfter:  [1, 1, 1, 0]\n\nBefore: [2, 0, 1, 2]\n10 1 2 1\nAfter:  [2, 1, 1, 2]\n\nBefore: [3, 3, 3, 0]\n13 1 0 2\nAfter:  [3, 3, 1, 0]\n\nBefore: [2, 0, 3, 3]\n11 0 3 3\nAfter:  [2, 0, 3, 0]\n\nBefore: [0, 1, 2, 3]\n5 1 3 3\nAfter:  [0, 1, 2, 3]\n\nBefore: [1, 0, 2, 3]\n1 1 0 0\nAfter:  [1, 0, 2, 3]\n\nBefore: [0, 0, 3, 3]\n10 0 1 0\nAfter:  [1, 0, 3, 3]\n\nBefore: [1, 0, 2, 2]\n1 1 0 0\nAfter:  [1, 0, 2, 2]\n\nBefore: [1, 0, 0, 2]\n1 1 0 2\nAfter:  [1, 0, 1, 2]\n\nBefore: [2, 3, 1, 1]\n6 2 1 2\nAfter:  [2, 3, 3, 1]\n\nBefore: [2, 2, 3, 1]\n14 3 2 2\nAfter:  [2, 2, 3, 1]\n\nBefore: [3, 3, 1, 3]\n6 2 1 3\nAfter:  [3, 3, 1, 3]\n\nBefore: [0, 1, 1, 2]\n2 1 0 0\nAfter:  [1, 1, 1, 2]\n\nBefore: [2, 0, 3, 3]\n0 2 2 3\nAfter:  [2, 0, 3, 9]\n\nBefore: [0, 1, 0, 0]\n9 0 0 1\nAfter:  [0, 0, 0, 0]\n\nBefore: [0, 1, 2, 1]\n2 1 0 3\nAfter:  [0, 1, 2, 1]\n\nBefore: [2, 2, 0, 3]\n15 0 3 3\nAfter:  [2, 2, 0, 3]\n\nBefore: [0, 3, 2, 1]\n14 3 2 3\nAfter:  [0, 3, 2, 3]\n\nBefore: [1, 2, 1, 3]\n15 1 3 0\nAfter:  [3, 2, 1, 3]\n\nBefore: [0, 3, 0, 2]\n9 0 0 3\nAfter:  [0, 3, 0, 0]\n\nBefore: [1, 2, 0, 1]\n13 1 1 1\nAfter:  [1, 1, 0, 1]\n\nBefore: [2, 3, 3, 1]\n14 3 2 1\nAfter:  [2, 3, 3, 1]\n\nBefore: [0, 2, 1, 3]\n15 1 3 3\nAfter:  [0, 2, 1, 3]\n\nBefore: [1, 0, 2, 1]\n7 3 1 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [0, 2, 3, 2]\n3 1 3 3\nAfter:  [0, 2, 3, 1]\n\nBefore: [3, 3, 1, 3]\n13 1 0 3\nAfter:  [3, 3, 1, 1]\n\nBefore: [3, 2, 2, 2]\n3 1 3 3\nAfter:  [3, 2, 2, 1]\n\nBefore: [0, 1, 1, 1]\n9 0 0 1\nAfter:  [0, 0, 1, 1]\n\nBefore: [0, 1, 2, 3]\n9 0 0 1\nAfter:  [0, 0, 2, 3]\n\nBefore: [0, 1, 3, 2]\n9 0 0 0\nAfter:  [0, 1, 3, 2]\n\nBefore: [1, 1, 3, 3]\n11 0 3 2\nAfter:  [1, 1, 0, 3]\n\nBefore: [1, 1, 1, 3]\n5 0 3 1\nAfter:  [1, 3, 1, 3]\n\nBefore: [3, 1, 1, 2]\n14 3 1 1\nAfter:  [3, 3, 1, 2]\n\nBefore: [0, 3, 1, 0]\n0 1 1 2\nAfter:  [0, 3, 9, 0]\n\nBefore: [0, 1, 1, 1]\n2 1 0 1\nAfter:  [0, 1, 1, 1]\n\nBefore: [2, 2, 2, 1]\n8 2 2 3\nAfter:  [2, 2, 2, 4]\n\nBefore: [1, 2, 3, 0]\n12 0 2 0\nAfter:  [3, 2, 3, 0]\n\nBefore: [3, 3, 2, 1]\n4 1 2 2\nAfter:  [3, 3, 1, 1]\n\nBefore: [2, 2, 2, 1]\n14 3 2 0\nAfter:  [3, 2, 2, 1]\n\nBefore: [1, 1, 2, 1]\n8 2 1 2\nAfter:  [1, 1, 3, 1]\n\nBefore: [0, 3, 2, 2]\n4 1 2 1\nAfter:  [0, 1, 2, 2]\n\nBefore: [1, 0, 0, 0]\n1 1 0 0\nAfter:  [1, 0, 0, 0]\n\nBefore: [0, 1, 3, 2]\n2 1 0 1\nAfter:  [0, 1, 3, 2]\n\nBefore: [3, 3, 2, 0]\n0 0 1 1\nAfter:  [3, 9, 2, 0]\n\nBefore: [2, 3, 3, 3]\n15 0 3 2\nAfter:  [2, 3, 3, 3]\n\nBefore: [1, 0, 0, 2]\n1 1 0 0\nAfter:  [1, 0, 0, 2]\n\nBefore: [0, 3, 2, 3]\n4 1 2 3\nAfter:  [0, 3, 2, 1]\n\nBefore: [0, 1, 1, 2]\n2 1 0 2\nAfter:  [0, 1, 1, 2]\n\nBefore: [1, 2, 1, 2]\n3 1 3 0\nAfter:  [1, 2, 1, 2]\n\nBefore: [2, 2, 0, 3]\n15 0 3 2\nAfter:  [2, 2, 3, 3]\n\nBefore: [1, 3, 3, 0]\n6 0 1 3\nAfter:  [1, 3, 3, 3]\n\nBefore: [3, 2, 2, 3]\n15 2 3 2\nAfter:  [3, 2, 3, 3]\n\nBefore: [2, 2, 0, 2]\n3 1 3 0\nAfter:  [1, 2, 0, 2]\n\nBefore: [0, 1, 3, 1]\n12 1 2 1\nAfter:  [0, 3, 3, 1]\n\nBefore: [2, 0, 3, 3]\n15 0 3 1\nAfter:  [2, 3, 3, 3]\n\nBefore: [1, 1, 0, 2]\n14 3 1 0\nAfter:  [3, 1, 0, 2]\n\nBefore: [3, 3, 1, 2]\n0 1 1 0\nAfter:  [9, 3, 1, 2]\n\nBefore: [3, 1, 0, 0]\n6 1 0 1\nAfter:  [3, 3, 0, 0]\n\nBefore: [2, 2, 3, 1]\n13 1 1 0\nAfter:  [1, 2, 3, 1]\n\nBefore: [1, 0, 3, 2]\n7 0 1 1\nAfter:  [1, 1, 3, 2]\n\nBefore: [0, 1, 2, 1]\n8 2 2 0\nAfter:  [4, 1, 2, 1]\n\nBefore: [1, 0, 3, 1]\n7 0 1 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [0, 3, 1, 1]\n6 2 1 0\nAfter:  [3, 3, 1, 1]\n\nBefore: [1, 0, 3, 3]\n12 0 2 1\nAfter:  [1, 3, 3, 3]\n\nBefore: [1, 3, 3, 3]\n12 0 2 2\nAfter:  [1, 3, 3, 3]\n\nBefore: [2, 1, 3, 1]\n12 1 2 3\nAfter:  [2, 1, 3, 3]\n\nBefore: [0, 2, 3, 2]\n3 1 3 1\nAfter:  [0, 1, 3, 2]\n\nBefore: [3, 2, 0, 1]\n0 0 0 3\nAfter:  [3, 2, 0, 9]\n\nBefore: [2, 0, 1, 3]\n15 0 3 2\nAfter:  [2, 0, 3, 3]\n\nBefore: [3, 1, 1, 2]\n6 2 0 3\nAfter:  [3, 1, 1, 3]\n\nBefore: [0, 0, 3, 1]\n7 3 1 2\nAfter:  [0, 0, 1, 1]\n\nBefore: [2, 2, 3, 3]\n15 1 3 0\nAfter:  [3, 2, 3, 3]\n\nBefore: [0, 0, 1, 1]\n7 2 1 3\nAfter:  [0, 0, 1, 1]\n\nBefore: [0, 1, 3, 2]\n12 1 2 2\nAfter:  [0, 1, 3, 2]\n\nBefore: [0, 1, 3, 3]\n0 2 2 2\nAfter:  [0, 1, 9, 3]\n\nBefore: [0, 0, 2, 3]\n10 0 1 3\nAfter:  [0, 0, 2, 1]\n\nBefore: [1, 3, 1, 1]\n6 0 1 3\nAfter:  [1, 3, 1, 3]\n\nBefore: [1, 0, 1, 2]\n10 1 2 1\nAfter:  [1, 1, 1, 2]\n\nBefore: [0, 1, 0, 2]\n14 3 1 0\nAfter:  [3, 1, 0, 2]\n\nBefore: [0, 1, 3, 2]\n9 0 0 2\nAfter:  [0, 1, 0, 2]\n\nBefore: [1, 0, 1, 2]\n1 1 0 0\nAfter:  [1, 0, 1, 2]\n\nBefore: [3, 0, 2, 1]\n7 3 1 0\nAfter:  [1, 0, 2, 1]\n\nBefore: [2, 2, 1, 3]\n5 2 3 2\nAfter:  [2, 2, 3, 3]\n\nBefore: [1, 3, 0, 3]\n5 0 3 2\nAfter:  [1, 3, 3, 3]\n\nBefore: [0, 1, 3, 1]\n12 1 2 2\nAfter:  [0, 1, 3, 1]\n\nBefore: [2, 3, 2, 3]\n15 2 3 1\nAfter:  [2, 3, 2, 3]\n\nBefore: [2, 1, 1, 3]\n11 0 3 2\nAfter:  [2, 1, 0, 3]\n\nBefore: [2, 2, 0, 2]\n3 1 3 3\nAfter:  [2, 2, 0, 1]\n\nBefore: [2, 3, 2, 3]\n15 0 3 2\nAfter:  [2, 3, 3, 3]\n\nBefore: [3, 2, 1, 3]\n5 2 3 1\nAfter:  [3, 3, 1, 3]\n\nBefore: [1, 0, 1, 3]\n5 2 3 2\nAfter:  [1, 0, 3, 3]\n\nBefore: [0, 1, 3, 1]\n2 1 0 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 0, 3, 2]\n7 0 1 3\nAfter:  [1, 0, 3, 1]\n\nBefore: [1, 2, 2, 2]\n3 1 3 1\nAfter:  [1, 1, 2, 2]\n\nBefore: [2, 3, 0, 3]\n4 1 0 0\nAfter:  [1, 3, 0, 3]\n\nBefore: [3, 3, 1, 1]\n6 2 0 2\nAfter:  [3, 3, 3, 1]\n\nBefore: [2, 3, 3, 1]\n0 0 2 3\nAfter:  [2, 3, 3, 6]\n\nBefore: [1, 1, 2, 1]\n14 3 2 0\nAfter:  [3, 1, 2, 1]\n\nBefore: [1, 3, 1, 3]\n11 0 3 0\nAfter:  [0, 3, 1, 3]\n\nBefore: [2, 2, 0, 3]\n15 0 3 1\nAfter:  [2, 3, 0, 3]\n\nBefore: [1, 2, 2, 0]\n10 1 0 1\nAfter:  [1, 1, 2, 0]\n\nBefore: [1, 0, 1, 0]\n10 1 2 1\nAfter:  [1, 1, 1, 0]\n\nBefore: [1, 2, 0, 3]\n10 1 0 2\nAfter:  [1, 2, 1, 3]\n\nBefore: [0, 1, 1, 1]\n2 1 0 3\nAfter:  [0, 1, 1, 1]\n\nBefore: [2, 0, 1, 0]\n7 2 1 2\nAfter:  [2, 0, 1, 0]\n\nBefore: [0, 3, 1, 3]\n6 2 1 1\nAfter:  [0, 3, 1, 3]\n\nBefore: [3, 1, 3, 3]\n5 1 3 1\nAfter:  [3, 3, 3, 3]\n\nBefore: [0, 3, 3, 1]\n0 1 2 2\nAfter:  [0, 3, 9, 1]\n\nBefore: [2, 3, 2, 2]\n8 3 2 0\nAfter:  [4, 3, 2, 2]\n\nBefore: [2, 3, 1, 2]\n4 1 0 3\nAfter:  [2, 3, 1, 1]\n\nBefore: [1, 0, 3, 2]\n12 0 2 0\nAfter:  [3, 0, 3, 2]\n\nBefore: [2, 1, 2, 2]\n8 2 1 0\nAfter:  [3, 1, 2, 2]\n\nBefore: [0, 0, 0, 0]\n10 0 1 3\nAfter:  [0, 0, 0, 1]\n\nBefore: [1, 3, 0, 3]\n11 0 3 2\nAfter:  [1, 3, 0, 3]\n\nBefore: [2, 0, 3, 1]\n7 3 1 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [0, 0, 3, 0]\n10 0 1 2\nAfter:  [0, 0, 1, 0]\n\nBefore: [2, 3, 1, 3]\n4 1 0 0\nAfter:  [1, 3, 1, 3]\n\nBefore: [3, 3, 2, 0]\n13 1 0 3\nAfter:  [3, 3, 2, 1]\n\nBefore: [1, 2, 2, 2]\n10 1 0 1\nAfter:  [1, 1, 2, 2]\n\nBefore: [3, 1, 3, 3]\n12 1 2 1\nAfter:  [3, 3, 3, 3]\n\nBefore: [3, 3, 2, 1]\n14 3 2 0\nAfter:  [3, 3, 2, 1]\n\nBefore: [2, 3, 2, 1]\n4 1 2 1\nAfter:  [2, 1, 2, 1]\n\nBefore: [0, 2, 2, 3]\n15 2 3 3\nAfter:  [0, 2, 2, 3]\n\nBefore: [3, 2, 3, 1]\n0 2 0 1\nAfter:  [3, 9, 3, 1]\n\nBefore: [0, 2, 0, 2]\n3 1 3 3\nAfter:  [0, 2, 0, 1]\n\nBefore: [3, 2, 3, 0]\n0 2 2 3\nAfter:  [3, 2, 3, 9]\n\nBefore: [0, 2, 1, 3]\n9 0 0 1\nAfter:  [0, 0, 1, 3]\n\nBefore: [0, 0, 0, 2]\n9 0 0 1\nAfter:  [0, 0, 0, 2]\n\nBefore: [1, 0, 3, 1]\n1 1 0 1\nAfter:  [1, 1, 3, 1]\n\nBefore: [1, 0, 1, 1]\n7 3 1 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [0, 3, 3, 2]\n9 0 0 0\nAfter:  [0, 3, 3, 2]\n\nBefore: [1, 0, 1, 1]\n1 1 0 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [3, 2, 1, 3]\n6 2 0 0\nAfter:  [3, 2, 1, 3]\n\nBefore: [2, 3, 2, 0]\n4 1 2 0\nAfter:  [1, 3, 2, 0]\n\nBefore: [1, 0, 2, 2]\n1 1 0 1\nAfter:  [1, 1, 2, 2]\n\nBefore: [1, 2, 1, 3]\n11 0 3 1\nAfter:  [1, 0, 1, 3]\n\nBefore: [0, 0, 2, 1]\n7 3 1 2\nAfter:  [0, 0, 1, 1]\n\nBefore: [1, 3, 1, 0]\n6 2 1 1\nAfter:  [1, 3, 1, 0]\n\nBefore: [1, 0, 1, 3]\n1 1 0 0\nAfter:  [1, 0, 1, 3]\n\nBefore: [3, 2, 2, 3]\n15 2 3 0\nAfter:  [3, 2, 2, 3]\n\nBefore: [1, 0, 1, 3]\n11 0 3 1\nAfter:  [1, 0, 1, 3]\n\nBefore: [3, 2, 1, 1]\n13 1 1 2\nAfter:  [3, 2, 1, 1]\n\nBefore: [1, 3, 0, 3]\n5 0 3 1\nAfter:  [1, 3, 0, 3]\n\nBefore: [2, 2, 2, 3]\n8 0 2 1\nAfter:  [2, 4, 2, 3]\n\nBefore: [0, 0, 3, 0]\n9 0 0 3\nAfter:  [0, 0, 3, 0]\n\nBefore: [1, 0, 2, 2]\n1 1 0 3\nAfter:  [1, 0, 2, 1]\n\nBefore: [0, 0, 3, 2]\n10 0 1 3\nAfter:  [0, 0, 3, 1]\n\nBefore: [0, 0, 0, 1]\n10 1 3 1\nAfter:  [0, 1, 0, 1]\n\nBefore: [0, 3, 3, 2]\n0 3 1 2\nAfter:  [0, 3, 6, 2]\n\nBefore: [2, 1, 3, 3]\n12 1 2 1\nAfter:  [2, 3, 3, 3]\n\nBefore: [0, 0, 2, 0]\n8 0 2 1\nAfter:  [0, 2, 2, 0]\n\nBefore: [3, 1, 1, 2]\n14 3 1 3\nAfter:  [3, 1, 1, 3]\n\nBefore: [0, 3, 2, 1]\n4 1 2 2\nAfter:  [0, 3, 1, 1]\n\nBefore: [3, 0, 1, 3]\n5 2 3 0\nAfter:  [3, 0, 1, 3]\n\nBefore: [1, 0, 3, 2]\n0 3 2 2\nAfter:  [1, 0, 6, 2]\n\nBefore: [2, 1, 3, 3]\n11 0 3 3\nAfter:  [2, 1, 3, 0]\n\nBefore: [1, 0, 0, 2]\n1 1 0 3\nAfter:  [1, 0, 0, 1]\n\nBefore: [3, 0, 1, 1]\n7 3 1 0\nAfter:  [1, 0, 1, 1]\n\nBefore: [2, 1, 2, 3]\n5 1 3 3\nAfter:  [2, 1, 2, 3]\n\nBefore: [1, 2, 0, 1]\n10 1 0 3\nAfter:  [1, 2, 0, 1]\n\nBefore: [2, 1, 0, 3]\n15 0 3 0\nAfter:  [3, 1, 0, 3]\n\nBefore: [1, 3, 3, 1]\n12 0 2 3\nAfter:  [1, 3, 3, 3]\n\nBefore: [2, 2, 3, 2]\n3 1 3 1\nAfter:  [2, 1, 3, 2]\n\nBefore: [2, 3, 3, 2]\n4 1 0 1\nAfter:  [2, 1, 3, 2]\n\nBefore: [3, 0, 1, 0]\n7 2 1 1\nAfter:  [3, 1, 1, 0]\n\nBefore: [1, 1, 0, 2]\n14 3 1 2\nAfter:  [1, 1, 3, 2]\n\nBefore: [2, 3, 1, 2]\n6 2 1 3\nAfter:  [2, 3, 1, 3]\n\nBefore: [2, 0, 0, 1]\n10 1 3 2\nAfter:  [2, 0, 1, 1]\n\nBefore: [1, 3, 1, 3]\n5 0 3 0\nAfter:  [3, 3, 1, 3]\n\nBefore: [0, 0, 1, 0]\n7 2 1 2\nAfter:  [0, 0, 1, 0]\n\nBefore: [1, 2, 1, 3]\n11 0 3 2\nAfter:  [1, 2, 0, 3]\n\nBefore: [2, 3, 0, 0]\n4 1 0 3\nAfter:  [2, 3, 0, 1]\n\nBefore: [1, 3, 1, 1]\n6 2 1 0\nAfter:  [3, 3, 1, 1]\n\nBefore: [0, 2, 2, 2]\n3 1 3 2\nAfter:  [0, 2, 1, 2]\n\nBefore: [3, 0, 3, 1]\n10 1 3 3\nAfter:  [3, 0, 3, 1]\n\nBefore: [2, 2, 1, 2]\n13 1 1 1\nAfter:  [2, 1, 1, 2]\n\nBefore: [0, 1, 3, 0]\n9 0 0 3\nAfter:  [0, 1, 3, 0]\n\nBefore: [2, 3, 0, 3]\n4 1 0 3\nAfter:  [2, 3, 0, 1]\n\nBefore: [0, 3, 2, 2]\n4 1 2 2\nAfter:  [0, 3, 1, 2]\n\nBefore: [2, 3, 3, 0]\n4 1 0 0\nAfter:  [1, 3, 3, 0]\n\nBefore: [0, 2, 3, 3]\n15 1 3 1\nAfter:  [0, 3, 3, 3]\n\nBefore: [0, 0, 2, 2]\n8 0 2 3\nAfter:  [0, 0, 2, 2]\n\nBefore: [1, 2, 2, 3]\n11 0 3 0\nAfter:  [0, 2, 2, 3]\n\nBefore: [0, 1, 0, 3]\n2 1 0 3\nAfter:  [0, 1, 0, 1]\n\nBefore: [3, 2, 3, 2]\n3 1 3 0\nAfter:  [1, 2, 3, 2]\n\nBefore: [3, 3, 1, 0]\n0 0 0 2\nAfter:  [3, 3, 9, 0]\n\nBefore: [1, 0, 0, 3]\n7 0 1 1\nAfter:  [1, 1, 0, 3]\n\nBefore: [0, 0, 0, 1]\n7 3 1 1\nAfter:  [0, 1, 0, 1]\n\nBefore: [1, 0, 0, 3]\n1 1 0 1\nAfter:  [1, 1, 0, 3]\n\nBefore: [1, 0, 2, 1]\n14 3 2 2\nAfter:  [1, 0, 3, 1]\n\nBefore: [1, 3, 2, 1]\n14 3 2 2\nAfter:  [1, 3, 3, 1]\n\nBefore: [2, 3, 3, 2]\n0 2 2 3\nAfter:  [2, 3, 3, 9]\n\nBefore: [0, 1, 2, 1]\n2 1 0 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 0, 3, 1]\n1 1 0 3\nAfter:  [1, 0, 3, 1]\n\nBefore: [3, 0, 3, 0]\n0 2 2 2\nAfter:  [3, 0, 9, 0]\n\nBefore: [0, 1, 2, 0]\n2 1 0 3\nAfter:  [0, 1, 2, 1]\n\nBefore: [2, 2, 3, 3]\n11 0 3 0\nAfter:  [0, 2, 3, 3]\n\nBefore: [0, 1, 0, 0]\n2 1 0 1\nAfter:  [0, 1, 0, 0]\n\nBefore: [0, 1, 0, 3]\n2 1 0 0\nAfter:  [1, 1, 0, 3]\n\nBefore: [3, 0, 2, 3]\n15 2 3 2\nAfter:  [3, 0, 3, 3]\n\nBefore: [0, 3, 1, 3]\n9 0 0 1\nAfter:  [0, 0, 1, 3]\n\nBefore: [3, 3, 2, 2]\n0 2 0 3\nAfter:  [3, 3, 2, 6]\n\nBefore: [1, 0, 2, 3]\n1 1 0 3\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 3, 3, 0]\n12 0 2 2\nAfter:  [1, 3, 3, 0]\n\nBefore: [3, 1, 3, 1]\n12 1 2 3\nAfter:  [3, 1, 3, 3]\n\nBefore: [2, 0, 1, 1]\n7 3 1 0\nAfter:  [1, 0, 1, 1]\n\nBefore: [0, 2, 0, 2]\n3 1 3 1\nAfter:  [0, 1, 0, 2]\n\nBefore: [1, 2, 1, 2]\n8 0 3 3\nAfter:  [1, 2, 1, 3]\n\nBefore: [3, 1, 1, 3]\n6 1 0 2\nAfter:  [3, 1, 3, 3]\n\nBefore: [1, 1, 3, 3]\n5 0 3 1\nAfter:  [1, 3, 3, 3]\n\nBefore: [0, 1, 3, 0]\n2 1 0 1\nAfter:  [0, 1, 3, 0]\n\nBefore: [0, 1, 2, 3]\n2 1 0 2\nAfter:  [0, 1, 1, 3]\n\nBefore: [0, 2, 0, 2]\n13 1 1 3\nAfter:  [0, 2, 0, 1]\n\nBefore: [1, 0, 1, 3]\n1 1 0 2\nAfter:  [1, 0, 1, 3]\n\nBefore: [1, 1, 0, 3]\n5 0 3 3\nAfter:  [1, 1, 0, 3]\n\nBefore: [1, 2, 3, 1]\n14 3 2 1\nAfter:  [1, 3, 3, 1]\n\nBefore: [2, 3, 2, 3]\n15 2 3 2\nAfter:  [2, 3, 3, 3]\n\nBefore: [1, 1, 2, 2]\n8 2 1 1\nAfter:  [1, 3, 2, 2]\n\nBefore: [1, 2, 1, 2]\n3 1 3 2\nAfter:  [1, 2, 1, 2]\n\nBefore: [0, 0, 1, 3]\n5 2 3 2\nAfter:  [0, 0, 3, 3]\n\nBefore: [2, 3, 0, 1]\n4 1 0 2\nAfter:  [2, 3, 1, 1]\n\nBefore: [0, 1, 3, 0]\n9 0 0 2\nAfter:  [0, 1, 0, 0]\n\nBefore: [3, 0, 0, 1]\n7 3 1 0\nAfter:  [1, 0, 0, 1]\n\nBefore: [1, 1, 3, 2]\n12 1 2 1\nAfter:  [1, 3, 3, 2]\n\nBefore: [1, 2, 3, 2]\n3 1 3 3\nAfter:  [1, 2, 3, 1]\n\nBefore: [2, 0, 1, 2]\n10 1 2 3\nAfter:  [2, 0, 1, 1]\n\nBefore: [3, 1, 3, 1]\n6 1 0 2\nAfter:  [3, 1, 3, 1]\n\nBefore: [3, 2, 2, 3]\n13 1 1 2\nAfter:  [3, 2, 1, 3]\n\nBefore: [1, 2, 0, 2]\n3 1 3 3\nAfter:  [1, 2, 0, 1]\n\nBefore: [0, 1, 0, 1]\n2 1 0 3\nAfter:  [0, 1, 0, 1]\n\nBefore: [3, 1, 1, 1]\n6 1 0 3\nAfter:  [3, 1, 1, 3]\n\nBefore: [3, 0, 3, 0]\n0 2 0 3\nAfter:  [3, 0, 3, 9]\n\nBefore: [1, 0, 1, 2]\n1 1 0 2\nAfter:  [1, 0, 1, 2]\n\nBefore: [0, 1, 2, 1]\n8 2 1 1\nAfter:  [0, 3, 2, 1]\n\nBefore: [3, 0, 2, 1]\n7 3 1 2\nAfter:  [3, 0, 1, 1]\n\nBefore: [0, 1, 1, 3]\n2 1 0 1\nAfter:  [0, 1, 1, 3]\n\nBefore: [1, 1, 2, 2]\n8 1 2 2\nAfter:  [1, 1, 3, 2]\n\nBefore: [3, 1, 3, 3]\n6 1 0 0\nAfter:  [3, 1, 3, 3]\n\nBefore: [1, 0, 3, 1]\n12 0 2 3\nAfter:  [1, 0, 3, 3]\n\nBefore: [1, 3, 3, 2]\n6 0 1 1\nAfter:  [1, 3, 3, 2]\n\nBefore: [0, 0, 3, 1]\n10 1 3 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [3, 2, 3, 2]\n3 1 3 1\nAfter:  [3, 1, 3, 2]\n\nBefore: [3, 3, 1, 2]\n6 2 0 2\nAfter:  [3, 3, 3, 2]\n\nBefore: [0, 1, 0, 2]\n2 1 0 2\nAfter:  [0, 1, 1, 2]\n\nBefore: [2, 1, 2, 3]\n8 0 1 1\nAfter:  [2, 3, 2, 3]\n\nBefore: [3, 3, 1, 0]\n6 2 0 3\nAfter:  [3, 3, 1, 3]\n\nBefore: [1, 3, 3, 2]\n13 1 2 1\nAfter:  [1, 1, 3, 2]\n\nBefore: [0, 0, 2, 3]\n15 2 3 0\nAfter:  [3, 0, 2, 3]\n\nBefore: [0, 1, 1, 1]\n2 1 0 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [0, 0, 0, 2]\n10 0 1 2\nAfter:  [0, 0, 1, 2]\n\nBefore: [0, 1, 1, 0]\n2 1 0 1\nAfter:  [0, 1, 1, 0]\n\nBefore: [0, 0, 2, 2]\n8 3 2 2\nAfter:  [0, 0, 4, 2]\n\nBefore: [2, 3, 1, 1]\n4 1 0 3\nAfter:  [2, 3, 1, 1]\n\nBefore: [1, 0, 0, 0]\n1 1 0 3\nAfter:  [1, 0, 0, 1]\n\nBefore: [1, 0, 3, 3]\n7 0 1 2\nAfter:  [1, 0, 1, 3]\n\nBefore: [1, 0, 3, 2]\n1 1 0 1\nAfter:  [1, 1, 3, 2]\n\nBefore: [0, 1, 1, 0]\n9 0 0 0\nAfter:  [0, 1, 1, 0]\n\nBefore: [3, 0, 3, 1]\n14 3 2 2\nAfter:  [3, 0, 3, 1]\n\nBefore: [2, 2, 2, 3]\n15 1 3 1\nAfter:  [2, 3, 2, 3]\n\nBefore: [0, 3, 3, 0]\n9 0 0 0\nAfter:  [0, 3, 3, 0]\n\nBefore: [0, 1, 3, 3]\n2 1 0 3\nAfter:  [0, 1, 3, 1]\n\nBefore: [1, 2, 2, 3]\n15 2 3 2\nAfter:  [1, 2, 3, 3]\n\nBefore: [3, 2, 2, 2]\n0 3 0 2\nAfter:  [3, 2, 6, 2]\n\nBefore: [0, 2, 3, 3]\n13 1 1 3\nAfter:  [0, 2, 3, 1]\n\nBefore: [0, 3, 2, 3]\n4 1 2 1\nAfter:  [0, 1, 2, 3]\n\nBefore: [0, 0, 3, 1]\n10 0 1 3\nAfter:  [0, 0, 3, 1]\n\nBefore: [2, 0, 2, 3]\n15 0 3 2\nAfter:  [2, 0, 3, 3]\n\nBefore: [1, 1, 3, 2]\n12 1 2 3\nAfter:  [1, 1, 3, 3]\n\nBefore: [1, 0, 2, 1]\n7 0 1 3\nAfter:  [1, 0, 2, 1]\n\nBefore: [0, 1, 3, 0]\n0 2 2 3\nAfter:  [0, 1, 3, 9]\n\nBefore: [2, 2, 2, 1]\n14 3 2 2\nAfter:  [2, 2, 3, 1]\n\nBefore: [0, 1, 0, 1]\n2 1 0 0\nAfter:  [1, 1, 0, 1]\n\nBefore: [0, 0, 2, 3]\n15 2 3 1\nAfter:  [0, 3, 2, 3]\n\nBefore: [1, 3, 0, 1]\n6 0 1 2\nAfter:  [1, 3, 3, 1]\n\nBefore: [1, 2, 2, 3]\n10 1 0 3\nAfter:  [1, 2, 2, 1]\n\nBefore: [0, 2, 3, 3]\n13 1 1 2\nAfter:  [0, 2, 1, 3]\n\nBefore: [0, 0, 0, 1]\n10 1 3 0\nAfter:  [1, 0, 0, 1]\n\nBefore: [2, 2, 3, 2]\n3 1 3 0\nAfter:  [1, 2, 3, 2]\n\nBefore: [0, 1, 2, 2]\n14 3 1 1\nAfter:  [0, 3, 2, 2]\n\nBefore: [0, 1, 3, 3]\n2 1 0 1\nAfter:  [0, 1, 3, 3]\n\nBefore: [3, 3, 3, 3]\n0 2 0 0\nAfter:  [9, 3, 3, 3]\n\nBefore: [1, 3, 2, 2]\n8 0 3 1\nAfter:  [1, 3, 2, 2]\n\nBefore: [2, 2, 0, 3]\n15 1 3 2\nAfter:  [2, 2, 3, 3]\n\nBefore: [1, 1, 2, 3]\n5 0 3 0\nAfter:  [3, 1, 2, 3]\n\nBefore: [2, 3, 3, 3]\n11 0 3 3\nAfter:  [2, 3, 3, 0]\n\nBefore: [2, 3, 2, 3]\n4 1 0 1\nAfter:  [2, 1, 2, 3]\n\nBefore: [2, 0, 0, 3]\n11 0 3 1\nAfter:  [2, 0, 0, 3]\n\nBefore: [3, 3, 1, 3]\n5 2 3 1\nAfter:  [3, 3, 1, 3]\n\nBefore: [1, 0, 3, 0]\n12 0 2 2\nAfter:  [1, 0, 3, 0]\n\nBefore: [1, 1, 3, 3]\n5 1 3 2\nAfter:  [1, 1, 3, 3]\n\nBefore: [1, 2, 0, 2]\n3 1 3 1\nAfter:  [1, 1, 0, 2]\n\nBefore: [2, 2, 3, 2]\n3 1 3 2\nAfter:  [2, 2, 1, 2]\n\nBefore: [3, 1, 2, 1]\n6 1 0 1\nAfter:  [3, 3, 2, 1]\n\nBefore: [0, 1, 3, 0]\n2 1 0 0\nAfter:  [1, 1, 3, 0]\n\nBefore: [1, 0, 1, 3]\n8 1 3 2\nAfter:  [1, 0, 3, 3]\n\nBefore: [1, 1, 2, 3]\n11 0 3 2\nAfter:  [1, 1, 0, 3]\n\nBefore: [0, 3, 2, 3]\n9 0 0 0\nAfter:  [0, 3, 2, 3]\n\nBefore: [3, 2, 2, 0]\n13 1 1 0\nAfter:  [1, 2, 2, 0]\n\nBefore: [1, 0, 0, 1]\n1 1 0 1\nAfter:  [1, 1, 0, 1]\n\nBefore: [2, 0, 0, 3]\n15 0 3 0\nAfter:  [3, 0, 0, 3]\n\nBefore: [3, 2, 0, 2]\n3 1 3 3\nAfter:  [3, 2, 0, 1]\n\nBefore: [1, 0, 1, 3]\n5 2 3 1\nAfter:  [1, 3, 1, 3]\n\nBefore: [2, 3, 3, 1]\n4 1 0 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [2, 2, 1, 3]\n5 2 3 1\nAfter:  [2, 3, 1, 3]\n\nBefore: [0, 1, 0, 0]\n9 0 0 2\nAfter:  [0, 1, 0, 0]\n\nBefore: [0, 1, 0, 1]\n2 1 0 2\nAfter:  [0, 1, 1, 1]\n\nBefore: [0, 1, 0, 2]\n2 1 0 3\nAfter:  [0, 1, 0, 1]\n\nBefore: [1, 2, 2, 2]\n13 1 1 1\nAfter:  [1, 1, 2, 2]\n\nBefore: [1, 2, 1, 2]\n3 1 3 3\nAfter:  [1, 2, 1, 1]\n\nBefore: [1, 0, 2, 3]\n11 0 3 1\nAfter:  [1, 0, 2, 3]\n\nBefore: [0, 2, 0, 3]\n15 1 3 0\nAfter:  [3, 2, 0, 3]\n\nBefore: [1, 2, 3, 3]\n15 1 3 2\nAfter:  [1, 2, 3, 3]\n\nBefore: [0, 0, 1, 1]\n10 1 2 2\nAfter:  [0, 0, 1, 1]\n\nBefore: [1, 3, 1, 3]\n5 2 3 3\nAfter:  [1, 3, 1, 3]\n\nBefore: [1, 3, 1, 3]\n6 0 1 2\nAfter:  [1, 3, 3, 3]\n\nBefore: [0, 1, 2, 2]\n2 1 0 0\nAfter:  [1, 1, 2, 2]\n\nBefore: [2, 2, 2, 2]\n3 1 3 0\nAfter:  [1, 2, 2, 2]\n\nBefore: [0, 1, 3, 2]\n2 1 0 3\nAfter:  [0, 1, 3, 1]\n\nBefore: [2, 2, 3, 1]\n13 1 0 1\nAfter:  [2, 1, 3, 1]\n\nBefore: [2, 0, 2, 1]\n7 3 1 0\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 0, 3, 3]\n12 0 2 0\nAfter:  [3, 0, 3, 3]\n\nBefore: [0, 0, 3, 3]\n10 0 1 3\nAfter:  [0, 0, 3, 1]\n\nBefore: [0, 2, 0, 2]\n9 0 0 0\nAfter:  [0, 2, 0, 2]\n\nBefore: [1, 2, 0, 3]\n11 0 3 0\nAfter:  [0, 2, 0, 3]\n\nBefore: [2, 0, 0, 3]\n11 0 3 0\nAfter:  [0, 0, 0, 3]\n\nBefore: [0, 2, 0, 2]\n3 1 3 0\nAfter:  [1, 2, 0, 2]\n\nBefore: [1, 3, 1, 3]\n6 0 1 1\nAfter:  [1, 3, 1, 3]\n\nBefore: [0, 1, 3, 2]\n2 1 0 2\nAfter:  [0, 1, 1, 2]\n\nBefore: [1, 0, 3, 1]\n1 1 0 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [1, 0, 2, 0]\n7 0 1 1\nAfter:  [1, 1, 2, 0]\n\nBefore: [2, 3, 1, 3]\n15 0 3 3\nAfter:  [2, 3, 1, 3]\n\nBefore: [1, 2, 0, 3]\n11 0 3 1\nAfter:  [1, 0, 0, 3]\n\nBefore: [1, 3, 0, 1]\n6 0 1 0\nAfter:  [3, 3, 0, 1]\n\nBefore: [2, 2, 1, 2]\n3 1 3 2\nAfter:  [2, 2, 1, 2]\n\nBefore: [1, 0, 3, 3]\n1 1 0 2\nAfter:  [1, 0, 1, 3]\n\nBefore: [3, 1, 0, 3]\n5 1 3 2\nAfter:  [3, 1, 3, 3]\n\nBefore: [0, 1, 2, 3]\n8 2 1 1\nAfter:  [0, 3, 2, 3]\n\nBefore: [0, 2, 2, 2]\n3 1 3 1\nAfter:  [0, 1, 2, 2]\n\nBefore: [1, 1, 2, 2]\n0 0 3 1\nAfter:  [1, 2, 2, 2]\n\nBefore: [2, 3, 1, 3]\n11 0 3 1\nAfter:  [2, 0, 1, 3]\n\nBefore: [3, 3, 2, 3]\n4 1 2 0\nAfter:  [1, 3, 2, 3]\n\nBefore: [3, 1, 3, 3]\n5 1 3 2\nAfter:  [3, 1, 3, 3]\n\nBefore: [2, 2, 1, 0]\n13 1 1 1\nAfter:  [2, 1, 1, 0]\n\nBefore: [0, 1, 3, 2]\n2 1 0 0\nAfter:  [1, 1, 3, 2]\n\nBefore: [3, 2, 0, 3]\n15 1 3 0\nAfter:  [3, 2, 0, 3]\n\nBefore: [2, 3, 0, 2]\n0 1 0 0\nAfter:  [6, 3, 0, 2]\n\nBefore: [2, 3, 0, 2]\n4 1 0 1\nAfter:  [2, 1, 0, 2]\n\nBefore: [1, 0, 1, 2]\n1 1 0 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [2, 3, 3, 2]\n0 3 2 1\nAfter:  [2, 6, 3, 2]\n\nBefore: [0, 1, 3, 1]\n2 1 0 3\nAfter:  [0, 1, 3, 1]\n\nBefore: [2, 0, 0, 3]\n15 0 3 3\nAfter:  [2, 0, 0, 3]\n\nBefore: [2, 1, 3, 3]\n5 1 3 3\nAfter:  [2, 1, 3, 3]\n\nBefore: [3, 1, 3, 2]\n12 1 2 3\nAfter:  [3, 1, 3, 3]\n\nBefore: [0, 2, 1, 2]\n3 1 3 1\nAfter:  [0, 1, 1, 2]\n\nBefore: [0, 1, 0, 0]\n2 1 0 3\nAfter:  [0, 1, 0, 1]\n\nBefore: [0, 2, 3, 1]\n14 3 2 0\nAfter:  [3, 2, 3, 1]\n\nBefore: [3, 2, 2, 1]\n13 1 1 1\nAfter:  [3, 1, 2, 1]\n\nBefore: [3, 3, 1, 3]\n6 2 0 3\nAfter:  [3, 3, 1, 3]\n\nBefore: [3, 0, 3, 1]\n14 3 2 3\nAfter:  [3, 0, 3, 3]\n\nBefore: [2, 3, 2, 3]\n11 0 3 0\nAfter:  [0, 3, 2, 3]\n\nBefore: [2, 0, 1, 3]\n5 2 3 2\nAfter:  [2, 0, 3, 3]\n\nBefore: [1, 3, 1, 3]\n11 0 3 1\nAfter:  [1, 0, 1, 3]\n\nBefore: [1, 0, 1, 1]\n7 3 1 1\nAfter:  [1, 1, 1, 1]\n\nBefore: [1, 2, 2, 1]\n14 3 2 0\nAfter:  [3, 2, 2, 1]\n\nBefore: [1, 0, 2, 3]\n8 1 2 1\nAfter:  [1, 2, 2, 3]\n\nBefore: [1, 0, 1, 0]\n7 2 1 0\nAfter:  [1, 0, 1, 0]\n\nBefore: [2, 2, 1, 0]\n13 1 1 2\nAfter:  [2, 2, 1, 0]\n\nBefore: [1, 0, 1, 2]\n7 2 1 2\nAfter:  [1, 0, 1, 2]\n\nBefore: [2, 2, 2, 2]\n3 1 3 2\nAfter:  [2, 2, 1, 2]\n\nBefore: [2, 1, 0, 3]\n11 0 3 1\nAfter:  [2, 0, 0, 3]\n\nBefore: [2, 1, 2, 3]\n11 0 3 1\nAfter:  [2, 0, 2, 3]\n\nBefore: [0, 0, 1, 1]\n7 3 1 1\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 1, 0, 2]\n14 3 1 1\nAfter:  [1, 3, 0, 2]\n\nBefore: [1, 0, 1, 0]\n7 0 1 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [0, 1, 2, 2]\n8 3 2 1\nAfter:  [0, 4, 2, 2]\n\nBefore: [1, 3, 0, 2]\n6 0 1 0\nAfter:  [3, 3, 0, 2]\n\nBefore: [1, 0, 1, 2]\n7 0 1 0\nAfter:  [1, 0, 1, 2]\n\nBefore: [3, 0, 3, 1]\n7 3 1 2\nAfter:  [3, 0, 1, 1]\n\nBefore: [0, 2, 0, 0]\n9 0 0 0\nAfter:  [0, 2, 0, 0]\n\nBefore: [1, 1, 2, 3]\n8 1 2 2\nAfter:  [1, 1, 3, 3]\n\nBefore: [0, 1, 2, 1]\n2 1 0 1\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 3, 3, 3]\n11 0 3 1\nAfter:  [1, 0, 3, 3]\n\nBefore: [3, 3, 1, 0]\n6 2 0 0\nAfter:  [3, 3, 1, 0]\n\nBefore: [2, 2, 0, 3]\n11 0 3 3\nAfter:  [2, 2, 0, 0]\n\nBefore: [3, 0, 1, 0]\n7 2 1 0\nAfter:  [1, 0, 1, 0]\n\nBefore: [1, 0, 3, 3]\n1 1 0 0\nAfter:  [1, 0, 3, 3]\n\nBefore: [1, 3, 3, 1]\n14 3 2 3\nAfter:  [1, 3, 3, 3]\n\nBefore: [2, 2, 0, 0]\n13 1 0 1\nAfter:  [2, 1, 0, 0]\n\nBefore: [2, 2, 2, 3]\n15 2 3 0\nAfter:  [3, 2, 2, 3]\n\nBefore: [3, 3, 0, 3]\n0 0 0 3\nAfter:  [3, 3, 0, 9]\n\nBefore: [2, 2, 1, 3]\n15 1 3 0\nAfter:  [3, 2, 1, 3]\n\nBefore: [2, 1, 3, 2]\n0 2 0 3\nAfter:  [2, 1, 3, 6]\n\nBefore: [0, 1, 1, 3]\n2 1 0 2\nAfter:  [0, 1, 1, 3]\n\nBefore: [2, 0, 1, 1]\n7 2 1 0\nAfter:  [1, 0, 1, 1]\n\nBefore: [1, 0, 2, 3]\n8 1 3 2\nAfter:  [1, 0, 3, 3]\n\nBefore: [0, 1, 0, 3]\n2 1 0 1\nAfter:  [0, 1, 0, 3]\n\nBefore: [0, 1, 2, 2]\n2 1 0 3\nAfter:  [0, 1, 2, 1]\n\nBefore: [1, 0, 1, 3]\n1 1 0 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [2, 3, 1, 3]\n4 1 0 3\nAfter:  [2, 3, 1, 1]\n\nBefore: [2, 3, 2, 1]\n4 1 0 3\nAfter:  [2, 3, 2, 1]\n\nBefore: [1, 1, 1, 2]\n0 0 3 0\nAfter:  [2, 1, 1, 2]\n\nBefore: [0, 0, 0, 1]\n9 0 0 0\nAfter:  [0, 0, 0, 1]\n\nBefore: [1, 0, 3, 3]\n5 0 3 1\nAfter:  [1, 3, 3, 3]\n\nBefore: [0, 1, 1, 0]\n2 1 0 3\nAfter:  [0, 1, 1, 1]\n\nBefore: [1, 2, 1, 3]\n10 1 0 3\nAfter:  [1, 2, 1, 1]\n\nBefore: [0, 2, 0, 2]\n3 1 3 2\nAfter:  [0, 2, 1, 2]\n\nBefore: [2, 2, 1, 2]\n3 1 3 3\nAfter:  [2, 2, 1, 1]\n\nBefore: [2, 1, 3, 2]\n12 1 2 3\nAfter:  [2, 1, 3, 3]\n\nBefore: [2, 1, 2, 3]\n15 2 3 3\nAfter:  [2, 1, 2, 3]\n\nBefore: [0, 1, 2, 2]\n9 0 0 2\nAfter:  [0, 1, 0, 2]\n\nBefore: [0, 2, 2, 2]\n8 0 2 0\nAfter:  [2, 2, 2, 2]\n\nBefore: [0, 3, 2, 3]\n4 1 2 0\nAfter:  [1, 3, 2, 3]\n\nBefore: [1, 1, 3, 2]\n8 0 3 0\nAfter:  [3, 1, 3, 2]\n\nBefore: [1, 1, 3, 1]\n12 1 2 1\nAfter:  [1, 3, 3, 1]\n\nBefore: [2, 1, 1, 3]\n5 1 3 3\nAfter:  [2, 1, 1, 3]\n\nBefore: [3, 1, 1, 2]\n6 1 0 1\nAfter:  [3, 3, 1, 2]\n\nBefore: [1, 2, 2, 3]\n15 2 3 0\nAfter:  [3, 2, 2, 3]\n\nBefore: [3, 1, 3, 2]\n6 1 0 1\nAfter:  [3, 3, 3, 2]\n\nBefore: [2, 2, 0, 2]\n3 1 3 1\nAfter:  [2, 1, 0, 2]\n\nBefore: [3, 0, 1, 3]\n5 2 3 3\nAfter:  [3, 0, 1, 3]\n\nBefore: [3, 3, 1, 2]\n8 2 3 2\nAfter:  [3, 3, 3, 2]\n\nBefore: [2, 1, 2, 0]\n8 3 2 2\nAfter:  [2, 1, 2, 0]\n\nBefore: [1, 2, 3, 0]\n12 0 2 2\nAfter:  [1, 2, 3, 0]\n\nBefore: [3, 2, 0, 2]\n3 1 3 1\nAfter:  [3, 1, 0, 2]\n\nBefore: [1, 2, 1, 3]\n5 0 3 2\nAfter:  [1, 2, 3, 3]\n\nBefore: [0, 1, 0, 3]\n9 0 0 0\nAfter:  [0, 1, 0, 3]\n\nBefore: [1, 2, 3, 3]\n10 1 0 2\nAfter:  [1, 2, 1, 3]\n\nBefore: [2, 2, 1, 1]\n13 1 0 3\nAfter:  [2, 2, 1, 1]\n\nBefore: [2, 0, 2, 3]\n15 2 3 0\nAfter:  [3, 0, 2, 3]\n\nBefore: [2, 0, 0, 1]\n10 1 3 1\nAfter:  [2, 1, 0, 1]\n\nBefore: [1, 0, 2, 1]\n1 1 0 1\nAfter:  [1, 1, 2, 1]\n\nBefore: [3, 0, 1, 3]\n10 1 2 3\nAfter:  [3, 0, 1, 1]\n\nBefore: [1, 1, 3, 3]\n5 1 3 1\nAfter:  [1, 3, 3, 3]\n\nBefore: [1, 1, 2, 3]\n5 0 3 3\nAfter:  [1, 1, 2, 3]\n\nBefore: [3, 0, 1, 0]\n6 2 0 3\nAfter:  [3, 0, 1, 3]\n\nBefore: [1, 2, 0, 0]\n10 1 0 3\nAfter:  [1, 2, 0, 1]\n\nBefore: [0, 1, 0, 2]\n2 1 0 0\nAfter:  [1, 1, 0, 2]\n\nBefore: [0, 1, 2, 0]\n9 0 0 1\nAfter:  [0, 0, 2, 0]\n\nBefore: [1, 1, 0, 3]\n8 2 3 1\nAfter:  [1, 3, 0, 3]\n\nBefore: [2, 3, 1, 3]\n4 1 0 1\nAfter:  [2, 1, 1, 3]\n\nBefore: [0, 1, 3, 3]\n9 0 0 3\nAfter:  [0, 1, 3, 0]\n\nBefore: [0, 0, 1, 3]\n10 0 1 0\nAfter:  [1, 0, 1, 3]\n\nBefore: [2, 0, 1, 1]\n10 1 3 3\nAfter:  [2, 0, 1, 1]\n\nBefore: [3, 3, 0, 0]\n0 0 1 1\nAfter:  [3, 9, 0, 0]\n\nBefore: [1, 3, 2, 0]\n4 1 2 0\nAfter:  [1, 3, 2, 0]\n\nBefore: [0, 1, 1, 3]\n9 0 0 0\nAfter:  [0, 1, 1, 3]\n\nBefore: [0, 1, 2, 0]\n2 1 0 2\nAfter:  [0, 1, 1, 0]\n\nBefore: [2, 3, 3, 0]\n0 2 1 1\nAfter:  [2, 9, 3, 0]\n\nBefore: [0, 0, 1, 2]\n10 1 2 3\nAfter:  [0, 0, 1, 1]\n\nBefore: [2, 2, 0, 2]\n13 1 0 3\nAfter:  [2, 2, 0, 1]\n\nBefore: [1, 0, 1, 1]\n10 1 2 0\nAfter:  [1, 0, 1, 1]\n\nBefore: [3, 3, 2, 2]\n13 1 0 1\nAfter:  [3, 1, 2, 2]\n\nBefore: [1, 0, 2, 1]\n8 0 2 1\nAfter:  [1, 3, 2, 1]\n\nBefore: [1, 1, 2, 2]\n8 2 2 2\nAfter:  [1, 1, 4, 2]\n\nBefore: [0, 0, 1, 3]\n5 2 3 3\nAfter:  [0, 0, 1, 3]\n\nBefore: [2, 3, 1, 0]\n6 2 1 3\nAfter:  [2, 3, 1, 3]\n\nBefore: [1, 3, 1, 0]\n6 2 1 3\nAfter:  [1, 3, 1, 3]\n\nBefore: [1, 0, 2, 3]\n7 0 1 2\nAfter:  [1, 0, 1, 3]\n\nBefore: [2, 0, 3, 1]\n0 3 0 0\nAfter:  [2, 0, 3, 1]\n\nBefore: [2, 2, 3, 2]\n3 1 3 3\nAfter:  [2, 2, 3, 1]\n\nBefore: [0, 1, 0, 3]\n2 1 0 2\nAfter:  [0, 1, 1, 3]\n\nBefore: [3, 1, 1, 3]\n6 1 0 1\nAfter:  [3, 3, 1, 3]\n\nBefore: [1, 2, 2, 3]\n13 1 1 1\nAfter:  [1, 1, 2, 3]\n\nBefore: [2, 2, 1, 3]\n15 0 3 2\nAfter:  [2, 2, 3, 3]\n\nBefore: [1, 0, 0, 0]\n1 1 0 1\nAfter:  [1, 1, 0, 0]\n\nBefore: [2, 2, 0, 3]\n11 0 3 0\nAfter:  [0, 2, 0, 3]\n\nBefore: [1, 0, 3, 2]\n1 1 0 0\nAfter:  [1, 0, 3, 2]\n\nBefore: [1, 0, 3, 0]\n1 1 0 1\nAfter:  [1, 1, 3, 0]\n\nBefore: [0, 2, 2, 0]\n9 0 0 3\nAfter:  [0, 2, 2, 0]\n\nBefore: [0, 3, 3, 3]\n0 3 1 0\nAfter:  [9, 3, 3, 3]\n\nBefore: [3, 2, 1, 2]\n3 1 3 2\nAfter:  [3, 2, 1, 2]\n\nBefore: [3, 1, 2, 2]\n14 3 1 3\nAfter:  [3, 1, 2, 3]\n\nBefore: [3, 1, 3, 1]\n12 1 2 1\nAfter:  [3, 3, 3, 1]\n\nBefore: [3, 3, 3, 3]\n0 3 0 0\nAfter:  [9, 3, 3, 3]\n\nBefore: [1, 3, 3, 2]\n12 0 2 2\nAfter:  [1, 3, 3, 2]\n\nBefore: [2, 0, 1, 3]\n11 0 3 1\nAfter:  [2, 0, 1, 3]\n\nBefore: [1, 0, 1, 0]\n1 1 0 2\nAfter:  [1, 0, 1, 0]\n\nBefore: [1, 2, 0, 2]\n3 1 3 0\nAfter:  [1, 2, 0, 2]\n\nBefore: [1, 0, 1, 3]\n11 0 3 2\nAfter:  [1, 0, 0, 3]\n\nBefore: [2, 0, 2, 1]\n7 3 1 3\nAfter:  [2, 0, 2, 1]\n\nBefore: [0, 2, 3, 2]\n3 1 3 2\nAfter:  [0, 2, 1, 2]\n\nBefore: [3, 1, 2, 1]\n14 3 2 3\nAfter:  [3, 1, 2, 3]\n\nBefore: [1, 0, 2, 3]\n1 1 0 1\nAfter:  [1, 1, 2, 3]\n\nBefore: [0, 1, 3, 1]\n2 1 0 1\nAfter:  [0, 1, 3, 1]\n\nBefore: [1, 0, 2, 0]\n1 1 0 3\nAfter:  [1, 0, 2, 1]\n\nBefore: [1, 2, 0, 3]\n13 1 1 3\nAfter:  [1, 2, 0, 1]\n\nBefore: [0, 2, 2, 2]\n9 0 0 3\nAfter:  [0, 2, 2, 0]\n\nBefore: [0, 2, 0, 1]\n13 1 1 3\nAfter:  [0, 2, 0, 1]\n\nBefore: [1, 2, 2, 3]\n13 1 1 0\nAfter:  [1, 2, 2, 3]\n\nBefore: [1, 0, 1, 2]\n7 0 1 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [2, 3, 2, 3]\n15 2 3 3\nAfter:  [2, 3, 2, 3]\n\nBefore: [2, 3, 0, 3]\n4 1 0 1\nAfter:  [2, 1, 0, 3]\n\nBefore: [1, 0, 0, 1]\n7 0 1 0\nAfter:  [1, 0, 0, 1]\n\nBefore: [0, 1, 3, 2]\n12 1 2 3\nAfter:  [0, 1, 3, 3]\n\nBefore: [2, 2, 1, 3]\n11 0 3 1\nAfter:  [2, 0, 1, 3]\n\nBefore: [0, 3, 2, 2]\n0 2 1 3\nAfter:  [0, 3, 2, 6]\n\nBefore: [3, 0, 3, 1]\n14 3 2 1\nAfter:  [3, 3, 3, 1]\n\nBefore: [3, 3, 2, 0]\n4 1 2 0\nAfter:  [1, 3, 2, 0]\n\nBefore: [2, 0, 3, 3]\n15 0 3 3\nAfter:  [2, 0, 3, 3]\n\nBefore: [1, 0, 2, 0]\n1 1 0 0\nAfter:  [1, 0, 2, 0]\n\nBefore: [2, 3, 1, 1]\n6 2 1 0\nAfter:  [3, 3, 1, 1]\n\nBefore: [0, 1, 0, 0]\n2 1 0 0\nAfter:  [1, 1, 0, 0]\n\nBefore: [0, 2, 1, 2]\n9 0 0 2\nAfter:  [0, 2, 0, 2]\n\nBefore: [0, 2, 2, 1]\n14 3 2 3\nAfter:  [0, 2, 2, 3]\n\nBefore: [2, 3, 2, 1]\n4 1 2 0\nAfter:  [1, 3, 2, 1]\n\nBefore: [3, 3, 0, 3]\n8 2 3 1\nAfter:  [3, 3, 0, 3]\n\nBefore: [3, 3, 3, 0]\n13 1 0 0\nAfter:  [1, 3, 3, 0]\n\nBefore: [1, 3, 0, 3]\n0 3 1 0\nAfter:  [9, 3, 0, 3]\n\nBefore: [1, 0, 1, 0]\n1 1 0 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [0, 0, 1, 3]\n5 2 3 1\nAfter:  [0, 3, 1, 3]\n\nBefore: [3, 1, 3, 2]\n12 1 2 1\nAfter:  [3, 3, 3, 2]\n\nBefore: [1, 3, 2, 1]\n6 0 1 3\nAfter:  [1, 3, 2, 3]\n\nBefore: [2, 0, 2, 1]\n8 0 2 1\nAfter:  [2, 4, 2, 1]\n\nBefore: [2, 0, 2, 2]\n8 1 2 2\nAfter:  [2, 0, 2, 2]\n\nBefore: [0, 0, 1, 1]\n7 3 1 2\nAfter:  [0, 0, 1, 1]\n\nBefore: [3, 0, 2, 2]\n8 1 2 1\nAfter:  [3, 2, 2, 2]\n\nBefore: [3, 1, 3, 3]\n5 1 3 3\nAfter:  [3, 1, 3, 3]\n\nBefore: [0, 1, 0, 2]\n9 0 0 0\nAfter:  [0, 1, 0, 2]\n\nBefore: [3, 1, 2, 2]\n6 1 0 0\nAfter:  [3, 1, 2, 2]\n\nBefore: [3, 0, 1, 0]\n6 2 0 0\nAfter:  [3, 0, 1, 0]\n\nBefore: [0, 1, 1, 1]\n9 0 0 2\nAfter:  [0, 1, 0, 1]\n\nBefore: [1, 2, 0, 3]\n15 1 3 2\nAfter:  [1, 2, 3, 3]\n\nBefore: [2, 3, 1, 0]\n4 1 0 2\nAfter:  [2, 3, 1, 0]\n\nBefore: [2, 1, 2, 2]\n14 3 1 1\nAfter:  [2, 3, 2, 2]\n\nBefore: [3, 2, 0, 3]\n15 1 3 3\nAfter:  [3, 2, 0, 3]\n\nBefore: [1, 3, 0, 0]\n6 0 1 0\nAfter:  [3, 3, 0, 0]\n\nBefore: [0, 1, 1, 3]\n2 1 0 0\nAfter:  [1, 1, 1, 3]\n\nBefore: [0, 3, 3, 1]\n14 3 2 0\nAfter:  [3, 3, 3, 1]\n\nBefore: [1, 3, 3, 3]\n13 1 2 1\nAfter:  [1, 1, 3, 3]\n\nBefore: [0, 3, 2, 0]\n4 1 2 1\nAfter:  [0, 1, 2, 0]\n\nBefore: [1, 0, 3, 1]\n12 0 2 0\nAfter:  [3, 0, 3, 1]\n\nBefore: [1, 1, 2, 2]\n14 3 1 2\nAfter:  [1, 1, 3, 2]\n\nBefore: [2, 1, 1, 3]\n5 2 3 2\nAfter:  [2, 1, 3, 3]\n\nBefore: [0, 2, 2, 3]\n15 1 3 1\nAfter:  [0, 3, 2, 3]\n\nBefore: [3, 3, 2, 2]\n4 1 2 3\nAfter:  [3, 3, 2, 1]\n\nBefore: [0, 1, 3, 1]\n9 0 0 2\nAfter:  [0, 1, 0, 1]\n\nBefore: [3, 1, 1, 3]\n5 2 3 0\nAfter:  [3, 1, 1, 3]\n\nBefore: [1, 0, 1, 3]\n1 1 0 1\nAfter:  [1, 1, 1, 3]\n\nBefore: [1, 0, 0, 3]\n1 1 0 2\nAfter:  [1, 0, 1, 3]\n\nBefore: [3, 2, 1, 2]\n3 1 3 1\nAfter:  [3, 1, 1, 2]\n\nBefore: [3, 2, 3, 3]\n15 1 3 0\nAfter:  [3, 2, 3, 3]\n\nBefore: [1, 2, 3, 3]\n0 2 2 2\nAfter:  [1, 2, 9, 3]\n\nBefore: [3, 0, 0, 1]\n7 3 1 3\nAfter:  [3, 0, 0, 1]\n\nBefore: [0, 1, 0, 1]\n2 1 0 1\nAfter:  [0, 1, 0, 1]\n\nBefore: [2, 1, 1, 3]\n5 2 3 0\nAfter:  [3, 1, 1, 3]\n\nBefore: [0, 1, 1, 2]\n2 1 0 1\nAfter:  [0, 1, 1, 2]\n\nBefore: [0, 0, 2, 3]\n9 0 0 0\nAfter:  [0, 0, 2, 3]\n\nBefore: [0, 2, 1, 2]\n8 2 3 3\nAfter:  [0, 2, 1, 3]\n\nBefore: [1, 0, 1, 1]\n1 1 0 3\nAfter:  [1, 0, 1, 1]\n\nBefore: [1, 0, 1, 3]\n8 1 3 0\nAfter:  [3, 0, 1, 3]\n\nBefore: [3, 1, 3, 2]\n14 3 1 0\nAfter:  [3, 1, 3, 2]\n\nBefore: [2, 2, 0, 0]\n13 1 0 2\nAfter:  [2, 2, 1, 0]\n\nBefore: [3, 1, 3, 1]\n12 1 2 0\nAfter:  [3, 1, 3, 1]\n\nBefore: [0, 3, 3, 0]\n13 1 2 1\nAfter:  [0, 1, 3, 0]\n\nBefore: [3, 1, 3, 3]\n12 1 2 0\nAfter:  [3, 1, 3, 3]\n\nBefore: [1, 2, 2, 3]\n8 0 2 1\nAfter:  [1, 3, 2, 3]\n\nBefore: [3, 0, 1, 0]\n7 2 1 3\nAfter:  [3, 0, 1, 1]\n\nBefore: [0, 1, 2, 3]\n2 1 0 3\nAfter:  [0, 1, 2, 1]\n\nBefore: [0, 0, 1, 0]\n9 0 0 1\nAfter:  [0, 0, 1, 0]\n\nBefore: [3, 2, 3, 1]\n13 1 1 1\nAfter:  [3, 1, 3, 1]\n\nBefore: [2, 2, 0, 2]\n3 1 3 2\nAfter:  [2, 2, 1, 2]\n\nBefore: [3, 3, 3, 2]\n0 2 0 0\nAfter:  [9, 3, 3, 2]\n\nBefore: [0, 0, 2, 3]\n10 0 1 1\nAfter:  [0, 1, 2, 3]\n\nBefore: [2, 3, 2, 2]\n8 0 2 3\nAfter:  [2, 3, 2, 4]\n\nBefore: [3, 3, 2, 1]\n14 3 2 1\nAfter:  [3, 3, 2, 1]\n\nBefore: [0, 0, 1, 1]\n9 0 0 1\nAfter:  [0, 0, 1, 1]\n\nBefore: [0, 2, 2, 2]\n3 1 3 0\nAfter:  [1, 2, 2, 2]\n\nBefore: [2, 2, 1, 2]\n3 1 3 1\nAfter:  [2, 1, 1, 2]\n\nBefore: [2, 1, 2, 3]\n11 0 3 2\nAfter:  [2, 1, 0, 3]\n\nBefore: [1, 2, 2, 2]\n3 1 3 2\nAfter:  [1, 2, 1, 2]\n\nBefore: [1, 3, 2, 0]\n4 1 2 2\nAfter:  [1, 3, 1, 0]\n\nBefore: [1, 1, 3, 3]\n12 1 2 2\nAfter:  [1, 1, 3, 3]\n\nBefore: [1, 2, 0, 3]\n15 1 3 3\nAfter:  [1, 2, 0, 3]\n\nBefore: [1, 2, 3, 3]\n12 0 2 3\nAfter:  [1, 2, 3, 3]\n\nBefore: [0, 2, 1, 2]\n3 1 3 2\nAfter:  [0, 2, 1, 2]\n\nBefore: [1, 1, 1, 2]\n8 1 3 1\nAfter:  [1, 3, 1, 2]\n\nBefore: [1, 1, 2, 1]\n14 3 2 1\nAfter:  [1, 3, 2, 1]\n\nBefore: [1, 0, 1, 1]\n1 1 0 0\nAfter:  [1, 0, 1, 1]\n\nBefore: [2, 1, 1, 3]\n15 0 3 0\nAfter:  [3, 1, 1, 3]\n\nBefore: [2, 1, 1, 3]\n11 0 3 1\nAfter:  [2, 0, 1, 3]\n\nBefore: [2, 3, 1, 3]\n11 0 3 0\nAfter:  [0, 3, 1, 3]\n\nBefore: [0, 3, 1, 1]\n9 0 0 0\nAfter:  [0, 3, 1, 1]\n\nBefore: [1, 0, 2, 1]\n7 0 1 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [1, 0, 0, 0]\n1 1 0 2\nAfter:  [1, 0, 1, 0]\n\nBefore: [1, 0, 2, 1]\n1 1 0 0\nAfter:  [1, 0, 2, 1]\n\nBefore: [0, 3, 3, 0]\n13 1 2 2\nAfter:  [0, 3, 1, 0]\n\nBefore: [3, 2, 0, 2]\n0 0 0 2\nAfter:  [3, 2, 9, 2]\n\nBefore: [2, 1, 2, 3]\n5 1 3 0\nAfter:  [3, 1, 2, 3]\n\nBefore: [2, 2, 2, 2]\n3 1 3 3\nAfter:  [2, 2, 2, 1]\n\nBefore: [1, 3, 2, 3]\n5 0 3 1\nAfter:  [1, 3, 2, 3]\n\nBefore: [2, 1, 3, 2]\n0 1 0 0\nAfter:  [2, 1, 3, 2]\n\nBefore: [1, 0, 0, 1]\n1 1 0 2\nAfter:  [1, 0, 1, 1]\n\nBefore: [3, 3, 3, 0]\n0 2 2 0\nAfter:  [9, 3, 3, 0]\n\nBefore: [2, 2, 3, 3]\n15 0 3 3\nAfter:  [2, 2, 3, 3]\n\nBefore: [0, 3, 2, 3]\n15 2 3 2\nAfter:  [0, 3, 3, 3]\n\nBefore: [1, 2, 0, 2]\n13 1 1 1\nAfter:  [1, 1, 0, 2]\n\nBefore: [0, 3, 1, 1]\n9 0 0 2\nAfter:  [0, 3, 0, 1]\n\nBefore: [0, 1, 2, 2]\n8 2 2 3\nAfter:  [0, 1, 2, 4]\n\nBefore: [0, 0, 2, 1]\n9 0 0 1\nAfter:  [0, 0, 2, 1]\n\nBefore: [2, 3, 0, 3]\n4 1 0 2\nAfter:  [2, 3, 1, 3]\n\nBefore: [1, 0, 2, 2]\n7 0 1 0\nAfter:  [1, 0, 2, 2]\n\nBefore: [3, 1, 3, 3]\n0 3 2 0\nAfter:  [9, 1, 3, 3]\n\nBefore: [2, 3, 2, 3]\n11 0 3 1\nAfter:  [2, 0, 2, 3]\n\nBefore: [1, 0, 3, 0]\n7 0 1 0\nAfter:  [1, 0, 3, 0]\n\nBefore: [1, 3, 2, 3]\n15 2 3 0\nAfter:  [3, 3, 2, 3]\n\nBefore: [1, 3, 3, 0]\n6 0 1 0\nAfter:  [3, 3, 3, 0]\n\nBefore: [3, 0, 1, 2]\n7 2 1 1\nAfter:  [3, 1, 1, 2]\n\nBefore: [0, 3, 1, 1]\n6 2 1 1\nAfter:  [0, 3, 1, 1]\n\nBefore: [3, 3, 3, 0]\n0 2 1 3\nAfter:  [3, 3, 3, 9]\n\nBefore: [3, 2, 1, 1]\n6 2 0 3\nAfter:  [3, 2, 1, 3]\n\nBefore: [1, 0, 3, 0]\n12 0 2 0\nAfter:  [3, 0, 3, 0]\n\nBefore: [1, 2, 1, 0]\n10 1 0 2\nAfter:  [1, 2, 1, 0]\n\nBefore: [1, 3, 2, 1]\n0 1 1 1\nAfter:  [1, 9, 2, 1]\n\nBefore: [2, 3, 1, 3]\n11 0 3 2\nAfter:  [2, 3, 0, 3]\n\nBefore: [0, 1, 1, 0]\n2 1 0 0\nAfter:  [1, 1, 1, 0]\n\nBefore: [2, 2, 3, 3]\n15 1 3 1\nAfter:  [2, 3, 3, 3]\n\nBefore: [2, 3, 0, 1]\n0 3 0 1\nAfter:  [2, 2, 0, 1]\n\nBefore: [1, 0, 1, 0]\n1 1 0 0\nAfter:  [1, 0, 1, 0]\n\nBefore: [2, 2, 0, 0]\n13 1 1 2\nAfter:  [2, 2, 1, 0]\n\nBefore: [2, 0, 3, 1]\n14 3 2 0\nAfter:  [3, 0, 3, 1]\n\nBefore: [2, 1, 3, 1]\n14 3 2 2\nAfter:  [2, 1, 3, 1]\n\nBefore: [3, 3, 1, 3]\n6 2 1 2\nAfter:  [3, 3, 3, 3]\n\nBefore: [1, 2, 1, 2]\n3 1 3 1\nAfter:  [1, 1, 1, 2]\n\nBefore: [1, 2, 2, 3]\n10 1 0 0\nAfter:  [1, 2, 2, 3]\n\nBefore: [0, 1, 3, 3]\n5 1 3 2\nAfter:  [0, 1, 3, 3]\n\nBefore: [2, 1, 2, 1]\n14 3 2 3\nAfter:  [2, 1, 2, 3]\n\nBefore: [3, 3, 2, 3]\n4 1 2 3\nAfter:  [3, 3, 2, 1]\n\nBefore: [1, 3, 2, 3]\n11 0 3 0\nAfter:  [0, 3, 2, 3]\n\nBefore: [1, 2, 0, 2]\n0 0 3 1\nAfter:  [1, 2, 0, 2]\n\nBefore: [2, 2, 2, 2]\n13 1 0 3\nAfter:  [2, 2, 2, 1]\n\nBefore: [1, 3, 2, 1]\n6 0 1 1\nAfter:  [1, 3, 2, 1]\n\nBefore: [1, 3, 2, 1]\n14 3 2 0\nAfter:  [3, 3, 2, 1]\n\nBefore: [2, 3, 3, 1]\n14 3 2 0\nAfter:  [3, 3, 3, 1]\n\nBefore: [1, 2, 1, 3]\n5 2 3 0\nAfter:  [3, 2, 1, 3]\n\nBefore: [1, 1, 3, 3]\n11 0 3 1\nAfter:  [1, 0, 3, 3]\n\nBefore: [3, 1, 2, 1]\n6 1 0 3\nAfter:  [3, 1, 2, 3]\n\nBefore: [1, 0, 1, 0]\n7 0 1 2\nAfter:  [1, 0, 1, 0]\n\nBefore: [3, 0, 1, 2]\n8 2 3 0\nAfter:  [3, 0, 1, 2]\n\nBefore: [2, 3, 0, 2]\n4 1 0 3\nAfter:  [2, 3, 0, 1]\n\nBefore: [0, 2, 2, 2]\n8 1 2 0\nAfter:  [4, 2, 2, 2]\n\nBefore: [3, 2, 2, 0]\n8 3 2 1\nAfter:  [3, 2, 2, 0]\n\nBefore: [2, 1, 2, 0]\n8 0 2 1\nAfter:  [2, 4, 2, 0]\n\nBefore: [3, 1, 3, 1]\n14 3 2 2\nAfter:  [3, 1, 3, 1]\n\nBefore: [3, 3, 1, 2]\n0 0 0 3\nAfter:  [3, 3, 1, 9]\n\nBefore: [2, 1, 0, 2]\n0 1 0 3\nAfter:  [2, 1, 0, 2]\n\nBefore: [3, 3, 1, 3]\n0 0 0 2\nAfter:  [3, 3, 9, 3]\n\nBefore: [1, 0, 2, 0]\n1 1 0 1\nAfter:  [1, 1, 2, 0]\n\nBefore: [1, 2, 1, 1]\n10 1 0 0\nAfter:  [1, 2, 1, 1]\n\nBefore: [1, 0, 1, 2]\n1 1 0 1\nAfter:  [1, 1, 1, 2]\n\n\n\n5 1 0 0\n12 0 2 0\n5 0 0 2\n12 2 3 2\n5 0 0 3\n12 3 1 3\n0 3 0 0\n5 0 3 0\n8 0 1 1\n2 1 1 3\n14 2 3 2\n14 0 2 1\n14 1 1 0\n2 0 2 0\n5 0 1 0\n8 3 0 3\n2 3 3 1\n14 2 1 3\n14 1 1 2\n14 2 0 0\n3 0 3 2\n5 2 1 2\n5 2 3 2\n8 1 2 1\n2 1 1 3\n5 2 0 1\n12 1 2 1\n14 1 1 0\n14 2 3 2\n2 0 2 2\n5 2 3 2\n8 3 2 3\n2 3 0 2\n14 1 1 1\n5 2 0 0\n12 0 2 0\n14 2 1 3\n14 3 0 3\n5 3 1 3\n8 2 3 2\n5 0 0 3\n12 3 2 3\n14 1 0 0\n14 0 3 1\n8 0 0 0\n5 0 1 0\n8 2 0 2\n2 2 3 1\n14 0 3 3\n14 0 0 2\n14 3 0 0\n7 0 2 2\n5 2 2 2\n8 1 2 1\n2 1 0 2\n14 2 0 3\n14 2 3 1\n14 2 2 0\n3 0 3 3\n5 3 3 3\n8 3 2 2\n2 2 1 0\n14 0 0 1\n5 2 0 2\n12 2 0 2\n14 1 0 3\n12 3 1 3\n5 3 1 3\n8 3 0 0\n2 0 2 2\n14 1 3 3\n14 2 2 0\n14 2 0 1\n4 0 3 3\n5 3 1 3\n5 3 3 3\n8 2 3 2\n2 2 0 1\n14 0 1 0\n14 2 3 2\n14 0 3 3\n11 3 2 3\n5 3 3 3\n8 3 1 1\n2 1 3 2\n14 2 2 3\n14 1 1 1\n14 2 2 0\n0 1 0 1\n5 1 1 1\n8 2 1 2\n2 2 2 3\n5 1 0 1\n12 1 3 1\n14 0 2 2\n13 0 1 1\n5 1 3 1\n8 1 3 3\n5 1 0 0\n12 0 3 0\n14 2 3 1\n14 2 0 2\n9 0 1 0\n5 0 1 0\n5 0 3 0\n8 3 0 3\n2 3 1 2\n14 0 3 1\n5 3 0 3\n12 3 1 3\n14 0 3 0\n14 3 0 0\n5 0 1 0\n8 2 0 2\n14 1 2 1\n14 2 3 0\n4 0 3 1\n5 1 3 1\n8 2 1 2\n2 2 3 3\n14 3 0 0\n14 0 2 2\n14 3 1 1\n1 2 0 0\n5 0 1 0\n8 0 3 3\n2 3 0 2\n14 3 2 3\n5 0 0 0\n12 0 2 0\n14 1 2 1\n9 3 0 0\n5 0 1 0\n8 0 2 2\n2 2 1 3\n14 0 2 2\n14 0 1 1\n14 3 0 0\n1 2 0 0\n5 0 2 0\n8 0 3 3\n2 3 0 0\n14 2 1 3\n14 2 2 1\n10 2 3 1\n5 1 2 1\n8 0 1 0\n14 3 3 1\n10 2 3 3\n5 3 3 3\n8 3 0 0\n2 0 1 3\n14 1 2 0\n14 2 3 2\n2 0 2 2\n5 2 1 2\n8 3 2 3\n2 3 1 1\n14 3 0 3\n14 2 0 2\n2 0 2 0\n5 0 1 0\n5 0 1 0\n8 0 1 1\n14 2 1 0\n14 2 0 3\n5 2 0 2\n12 2 0 2\n10 2 3 2\n5 2 3 2\n8 2 1 1\n5 1 0 3\n12 3 3 3\n14 0 2 2\n14 3 3 0\n1 2 0 3\n5 3 1 3\n8 3 1 1\n2 1 2 3\n14 3 2 2\n14 2 2 0\n14 1 1 1\n6 0 2 1\n5 1 1 1\n8 3 1 3\n2 3 2 1\n5 3 0 2\n12 2 2 2\n14 1 2 0\n14 0 3 3\n2 0 2 3\n5 3 3 3\n8 3 1 1\n5 0 0 2\n12 2 0 2\n14 0 0 3\n8 0 0 3\n5 3 3 3\n8 3 1 1\n14 2 0 3\n0 0 3 2\n5 2 1 2\n5 2 2 2\n8 1 2 1\n14 0 2 2\n14 3 0 0\n1 2 0 2\n5 2 3 2\n8 2 1 1\n2 1 1 0\n14 2 1 2\n14 3 3 1\n14 3 1 3\n13 2 1 1\n5 1 1 1\n8 1 0 0\n2 0 0 1\n14 0 1 2\n14 3 0 0\n14 1 1 3\n1 2 0 2\n5 2 1 2\n5 2 2 2\n8 1 2 1\n2 1 1 0\n14 3 0 2\n14 0 2 1\n5 3 2 3\n5 3 3 3\n8 3 0 0\n2 0 0 2\n14 2 1 3\n14 1 2 1\n14 2 0 0\n3 0 3 1\n5 1 1 1\n8 1 2 2\n2 2 3 1\n14 2 0 2\n14 1 2 3\n4 0 3 0\n5 0 1 0\n8 0 1 1\n14 1 1 0\n2 0 2 2\n5 2 3 2\n8 2 1 1\n14 3 2 3\n14 2 0 0\n14 3 1 2\n6 0 2 2\n5 2 3 2\n8 2 1 1\n2 1 0 0\n14 2 3 2\n14 1 2 1\n14 0 1 3\n11 3 2 2\n5 2 3 2\n8 0 2 0\n2 0 0 1\n14 1 0 0\n14 3 1 3\n14 3 3 2\n14 2 3 2\n5 2 3 2\n5 2 2 2\n8 1 2 1\n2 1 2 2\n14 2 2 0\n5 1 0 3\n12 3 1 3\n14 2 1 1\n8 3 3 1\n5 1 3 1\n5 1 2 1\n8 2 1 2\n14 3 3 1\n5 3 0 0\n12 0 1 0\n8 0 0 3\n5 3 1 3\n5 3 3 3\n8 3 2 2\n2 2 2 1\n5 2 0 2\n12 2 0 2\n14 2 0 3\n5 1 0 0\n12 0 2 0\n3 0 3 2\n5 2 3 2\n8 2 1 1\n14 0 3 2\n14 1 2 0\n0 0 3 3\n5 3 1 3\n8 3 1 1\n2 1 1 3\n14 1 0 2\n14 1 0 1\n8 1 0 0\n5 0 3 0\n8 0 3 3\n14 1 3 0\n14 2 0 2\n14 3 3 1\n2 0 2 0\n5 0 1 0\n8 3 0 3\n2 3 3 1\n14 0 0 3\n14 3 1 2\n14 1 2 0\n10 3 2 0\n5 0 3 0\n5 0 2 0\n8 1 0 1\n14 2 2 0\n5 2 0 2\n12 2 1 2\n14 2 0 3\n3 0 3 0\n5 0 3 0\n8 0 1 1\n2 1 3 0\n14 3 3 2\n5 2 0 1\n12 1 0 1\n14 3 1 3\n7 3 2 2\n5 2 3 2\n8 2 0 0\n2 0 3 1\n14 0 1 0\n14 2 2 3\n14 0 0 2\n10 2 3 0\n5 0 3 0\n5 0 3 0\n8 0 1 1\n2 1 3 0\n5 0 0 1\n12 1 2 1\n14 3 0 3\n7 3 2 1\n5 1 3 1\n8 1 0 0\n2 0 3 1\n5 3 0 0\n12 0 3 0\n14 1 1 3\n5 1 0 2\n12 2 3 2\n5 3 2 0\n5 0 1 0\n8 0 1 1\n2 1 3 3\n14 3 2 1\n14 2 1 0\n1 0 2 0\n5 0 3 0\n8 3 0 3\n2 3 1 1\n14 1 0 0\n14 0 1 3\n14 2 0 2\n2 0 2 0\n5 0 1 0\n8 0 1 1\n2 1 0 0\n5 3 0 1\n12 1 3 1\n11 3 2 2\n5 2 1 2\n8 2 0 0\n14 3 1 2\n14 2 0 1\n14 2 3 3\n15 1 3 2\n5 2 1 2\n8 2 0 0\n2 0 3 3\n14 3 3 1\n14 2 1 0\n5 2 0 2\n12 2 2 2\n9 1 0 1\n5 1 3 1\n5 1 1 1\n8 3 1 3\n2 3 0 2\n14 1 3 1\n14 1 3 0\n14 2 1 3\n8 1 0 0\n5 0 3 0\n8 0 2 2\n2 2 2 3\n5 3 0 1\n12 1 2 1\n14 0 0 2\n5 3 0 0\n12 0 1 0\n5 0 2 0\n5 0 3 0\n8 3 0 3\n2 3 1 1\n14 2 2 0\n14 2 0 3\n14 3 3 2\n6 0 2 0\n5 0 2 0\n8 0 1 1\n2 1 2 2\n14 0 1 3\n14 1 1 0\n14 3 0 1\n12 0 1 3\n5 3 3 3\n8 2 3 2\n2 2 3 3\n5 3 0 0\n12 0 2 0\n14 0 2 2\n14 1 1 1\n0 1 0 0\n5 0 3 0\n8 0 3 3\n2 3 3 2\n14 2 0 0\n14 2 0 3\n5 2 0 1\n12 1 3 1\n13 0 1 0\n5 0 1 0\n5 0 2 0\n8 2 0 2\n2 2 3 3\n14 2 1 2\n14 1 1 0\n14 2 1 1\n2 0 2 1\n5 1 3 1\n8 1 3 3\n5 2 0 2\n12 2 3 2\n5 3 0 1\n12 1 3 1\n14 0 2 0\n7 1 2 2\n5 2 3 2\n8 2 3 3\n2 3 0 1\n14 1 2 3\n14 3 0 2\n5 3 2 0\n5 0 1 0\n8 0 1 1\n5 0 0 3\n12 3 2 3\n14 1 1 0\n14 1 1 2\n0 0 3 0\n5 0 3 0\n8 0 1 1\n2 1 1 2\n14 0 2 1\n14 2 1 0\n3 0 3 0\n5 0 2 0\n8 2 0 2\n2 2 1 0\n5 0 0 2\n12 2 2 2\n14 3 0 1\n5 3 0 3\n12 3 0 3\n15 2 3 2\n5 2 2 2\n8 2 0 0\n2 0 3 2\n14 1 2 1\n14 2 3 0\n14 3 1 3\n9 3 0 3\n5 3 3 3\n8 2 3 2\n5 0 0 1\n12 1 3 1\n14 1 0 3\n4 0 3 3\n5 3 3 3\n5 3 1 3\n8 3 2 2\n2 2 0 1\n14 2 1 3\n5 3 0 2\n12 2 0 2\n14 3 2 0\n10 2 3 3\n5 3 2 3\n8 1 3 1\n2 1 2 0\n14 1 3 2\n5 1 0 3\n12 3 0 3\n14 0 2 1\n14 3 2 2\n5 2 1 2\n5 2 2 2\n8 0 2 0\n14 1 3 1\n14 0 3 2\n5 1 2 1\n5 1 2 1\n5 1 1 1\n8 1 0 0\n5 1 0 2\n12 2 3 2\n14 2 3 1\n6 1 2 2\n5 2 1 2\n8 2 0 0\n2 0 2 3\n14 1 2 0\n14 0 2 2\n5 0 2 2\n5 2 3 2\n8 2 3 3\n14 0 3 1\n5 2 0 2\n12 2 2 2\n2 0 2 2\n5 2 2 2\n8 3 2 3\n2 3 0 0\n14 2 0 2\n14 1 2 1\n14 0 2 3\n15 2 3 3\n5 3 1 3\n8 3 0 0\n2 0 1 1\n14 2 0 3\n14 1 3 0\n14 1 1 2\n0 0 3 2\n5 2 2 2\n8 2 1 1\n2 1 0 3\n5 3 0 1\n12 1 1 1\n14 3 3 2\n5 0 2 2\n5 2 3 2\n8 3 2 3\n2 3 2 1\n14 0 2 3\n5 0 0 0\n12 0 2 0\n14 3 1 2\n6 0 2 3\n5 3 3 3\n8 3 1 1\n2 1 2 3\n14 1 3 1\n14 2 2 2\n0 1 0 0\n5 0 1 0\n8 0 3 3\n14 2 3 0\n14 3 2 2\n1 0 2 2\n5 2 2 2\n8 2 3 3\n2 3 0 1\n14 1 3 2\n14 1 0 3\n14 1 3 0\n8 0 0 3\n5 3 1 3\n5 3 3 3\n8 3 1 1\n2 1 3 3\n14 3 0 1\n14 2 2 2\n14 3 2 0\n6 2 0 2\n5 2 1 2\n5 2 3 2\n8 2 3 3\n2 3 3 1\n14 2 3 2\n5 2 0 3\n12 3 0 3\n11 3 2 2\n5 2 2 2\n8 1 2 1\n14 3 0 2\n10 3 2 3\n5 3 2 3\n5 3 3 3\n8 3 1 1\n2 1 2 3\n14 2 2 2\n14 3 0 1\n6 2 0 0\n5 0 1 0\n5 0 3 0\n8 0 3 3\n2 3 2 1\n14 2 1 0\n14 1 1 3\n14 1 2 2\n4 0 3 2\n5 2 3 2\n8 1 2 1\n2 1 1 2\n14 0 2 3\n14 3 2 1\n15 0 3 1\n5 1 2 1\n5 1 2 1\n8 1 2 2\n14 3 1 0\n14 1 3 3\n14 0 2 1\n12 3 1 3\n5 3 2 3\n5 3 1 3\n8 2 3 2\n2 2 1 1\n14 0 1 0\n14 3 0 3\n14 3 3 2\n14 2 3 3\n5 3 2 3\n5 3 3 3\n8 3 1 1\n14 3 3 3\n14 2 1 0\n14 0 1 2\n14 2 3 3\n5 3 2 3\n8 1 3 1\n2 1 2 3\n14 3 3 2\n14 3 3 0\n14 2 2 1\n6 1 0 1\n5 1 3 1\n8 1 3 3\n2 3 2 1\n14 3 2 3\n14 2 0 2\n13 2 0 2\n5 2 1 2\n8 2 1 1\n2 1 2 0\n14 1 0 3\n14 3 3 1\n14 3 3 2\n14 2 1 1\n5 1 1 1\n5 1 2 1\n8 0 1 0\n2 0 3 3\n5 0 0 1\n12 1 1 1\n14 0 1 2\n14 3 0 0\n1 2 0 1\n5 1 1 1\n5 1 2 1\n8 3 1 3\n2 3 1 1\n5 2 0 2\n12 2 2 2\n14 3 1 3\n6 2 0 3\n5 3 3 3\n5 3 2 3\n8 1 3 1\n5 3 0 2\n12 2 0 2\n14 2 1 3\n5 2 0 0\n12 0 2 0\n3 0 3 3\n5 3 2 3\n8 3 1 1\n2 1 2 2\n5 1 0 0\n12 0 3 0\n14 1 1 3\n14 3 2 1\n12 3 1 1\n5 1 2 1\n5 1 1 1\n8 1 2 2\n2 2 1 1\n14 2 0 2\n5 2 0 3\n12 3 0 3\n5 0 0 0\n12 0 1 0\n11 3 2 0\n5 0 3 0\n8 1 0 1\n2 1 1 2\n5 3 0 1\n12 1 1 1\n14 2 0 3\n5 2 0 0\n12 0 2 0\n3 0 3 3\n5 3 1 3\n5 3 1 3\n8 2 3 2\n2 2 1 1\n14 0 2 0\n5 3 0 2\n12 2 3 2\n14 0 1 3\n14 2 3 2\n5 2 3 2\n8 2 1 1\n2 1 2 3\n14 2 3 1\n14 2 1 0\n5 0 0 2\n12 2 3 2\n6 1 2 0\n5 0 2 0\n8 3 0 3\n2 3 1 1\n14 0 0 2\n5 0 0 3\n12 3 1 3\n14 2 3 0\n8 3 3 0\n5 0 3 0\n8 1 0 1\n5 0 0 0\n12 0 2 0\n14 3 2 2\n14 2 2 3\n3 0 3 2\n5 2 2 2\n8 2 1 1\n14 3 2 2\n3 0 3 3\n5 3 1 3\n5 3 1 3\n8 1 3 1\n2 1 3 3\n14 0 3 2\n14 0 0 1\n5 0 0 0\n12 0 1 0\n8 0 0 2\n5 2 2 2\n8 2 3 3\n2 3 0 1\n5 3 0 3\n12 3 2 3\n14 0 0 2\n14 2 3 0\n10 2 3 0\n5 0 3 0\n8 0 1 1\n14 2 3 2\n14 1 2 0\n8 0 0 0\n5 0 2 0\n5 0 3 0\n8 0 1 1\n2 1 2 3\n14 2 3 1\n14 1 2 0\n8 0 0 0\n5 0 3 0\n8 0 3 3\n2 3 0 1\n5 2 0 3\n12 3 2 3\n14 1 3 0\n2 0 2 3\n5 3 2 3\n8 1 3 1\n2 1 0 2\n14 2 1 1\n14 3 1 3\n14 3 3 0\n6 1 0 3\n5 3 3 3\n8 2 3 2\n14 0 2 3\n14 1 0 0\n5 0 0 1\n12 1 0 1\n14 3 0 0\n5 0 2 0\n8 0 2 2\n2 2 1 0\n14 2 0 2\n14 1 2 1\n11 3 2 1\n5 1 3 1\n5 1 2 1\n8 1 0 0\n2 0 0 2\n14 1 0 3\n14 2 3 0\n5 0 0 1\n12 1 0 1\n4 0 3 3\n5 3 2 3\n5 3 1 3\n8 2 3 2\n2 2 3 0\n5 0 0 2\n12 2 3 2\n14 1 3 1\n14 1 1 3\n14 3 1 3\n5 3 2 3\n8 3 0 0\n2 0 0 2\n5 0 0 3\n12 3 2 3\n14 0 3 1\n14 2 2 0\n3 0 3 1\n5 1 3 1\n5 1 3 1\n8 2 1 2\n5 1 0 1\n12 1 2 1\n14 3 0 0\n9 0 1 3\n5 3 1 3\n8 2 3 2\n2 2 2 1\n14 2 3 0\n14 2 2 3\n14 3 0 2\n6 0 2 3\n5 3 1 3\n5 3 1 3\n8 1 3 1\n2 1 0 3\n14 3 3 0\n14 2 2 1\n9 0 1 1\n5 1 1 1\n8 1 3 3\n14 1 0 2\n14 3 0 1\n14 1 0 0\n7 1 2 0\n5 0 3 0\n5 0 2 0\n8 3 0 3\n5 1 0 0\n12 0 3 0\n14 1 0 1\n7 0 2 2\n5 2 1 2\n8 3 2 3\n2 3 1 2\n14 2 3 3\n14 1 2 0\n0 1 3 1\n5 1 2 1\n8 2 1 2\n2 2 3 1\n5 1 0 0\n12 0 2 0\n14 0 3 2\n3 0 3 0\n5 0 3 0\n5 0 3 0\n8 1 0 1\n2 1 2 2\n14 2 2 0\n14 0 3 1\n14 0 1 3\n14 3 0 0\n5 0 2 0\n8 0 2 2\n2 2 2 3\n14 1 3 0\n5 1 0 1\n12 1 1 1\n14 0 2 2\n8 1 0 1\n5 1 3 1\n5 1 1 1\n8 1 3 3\n2 3 0 0")
(let [[p1 p2] (str/split input #"\n\n\n\n")]
  (def INPUT1 p1)
  (def INPUT2 p2))

(defn parse-sample [lines]
  (let [[before operation after] (str/split-lines lines)
        f #(-> % (str/split #":") (second) (edn/read-string))]
    {:op     (->> operation (format "[%s]") (edn/read-string))
     :before (f before)
     :after  (f after)}))

(def SAMPLES
  (->> (str/split INPUT1 #"\n\n")
    (map parse-sample)))

(def OPS #{:addr :addi :mulr :muli :banr :bani :borr :bori :setr :seti :gtir :gtri :gtrr :eqir :eqri :eqrr})

(defn apply-named-op [[op A B C] regs]
  (let [RA (get regs A)
        RB (get regs B)
        RC (case op
             :addr (+ RA RB)
             :addi (+ RA B)
             :mulr (* RA RB)
             :muli (* RA B)
             :banr (bit-and RA RB)
             :bani (bit-and RA B)
             :borr (bit-or RA RB)
             :bori (bit-or RA B)
             :setr RA
             :seti A
             :gtir (if (> A RB) 1 0)
             :gtri (if (> RA B) 1 0)
             :gtrr (if (> RA RB) 1 0)
             :eqir (if (= A RB) 1 0)
             :eqri (if (= RA B) 1 0)
             :eqrr (if (= RA RB) 1 0))]
    (assoc regs C RC)))


(defn op-matches? [op-name {:as sample :keys [:op :before :after]}]
  (let [named-op (assoc op 0 op-name)]
    (= after (apply-named-op named-op before))))

(defn matches-3+? [sample]
  (let [m? #(op-matches? % sample)]
    (= 3 (reduce
           (fn rf [n op-name]
             (cond
               (= 3 n)      (reduced n)
               (m? op-name) (inc n)
               :else        n))
           0 OPS))))

(defn f1 []
  (loop [[sample & todo] SAMPLES
         amount 0]
    (cond
      (nil? sample)         amount
      (matches-3+? sample) (recur todo (inc amount))
      :else                (recur todo amount))))

(assert (= (f1) 592))


(defn op-matches-all? [samples op-name]
  (->> samples
    (map (partial op-matches? op-name))
    (every? true?)))

(def sconj (fnil conj #{}))

(defn unambiguify [names-to-nums]
  (let [fact? #(-> % val count (= 1))]
    (loop [solved  {}
           guesses names-to-nums]
      (if (empty? guesses)
        solved
        (let [facts      (filter fact? guesses)
              bound-nums (->> facts (mapcat second) (set))
              solved     (reduce
                           (fn rf1 [m [op-name op-nums]]
                             (assoc m (first op-nums) op-name))
                           solved facts)
              guesses    (as-> guesses $
                           (reduce
                             (fn rf2 [m op-name]
                               (dissoc m op-name))
                             $ (map key facts))
                           (reduce
                             (fn rf3 [m k]
                               (update m k set/difference bound-nums))
                             $ (keys $)))]
          (recur solved guesses))))))

(def OP-BY-NUM
  (time
    (->> SAMPLES
      (group-by #(-> % :op first))
      (reduce-kv
        (fn rf [m n samples]
          (->> OPS
            (filter (partial op-matches-all? samples))
            (reduce #(update %1 %2 sconj n) m)))
        {})
      (unambiguify))))

