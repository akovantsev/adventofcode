(ns adventofcode.y2022.day03
  (:require [adventofcode.utils :as u]
            [clojure.string :as str]
            [clojure.set :as set]))

;https://adventofcode.com/2022/day/3

(def sample "vJrwpWtwJgWrhcsFMMfFFhFp\njqHRNqRjqzjGDLGLrsFMfFZSrLrFZsSL\nPmmdzqPrVvPwwTWBwg\nwMqvLMZHhHMvwLHjbvcjnnSBnvTQFn\nttgJtRGJQctTZtZT\nCrZsJsPPZsGzwwsLwLmpwMDw")
(def data "wgqJtbJMqZVTwWPZZT\nLHcTGHQhzrTzBsZFPHFZWFFs\nRnLRClzGzRGLGLGCNRjTMjJfgmffSffMqNgp\nWPLgsfLmLgqZvZgSRR\nRbwHdbDdQFFFMvvMjbhqhZZS\nlzTdldBDszfGcRsr\nZjnhJjMjnbdnbHdFLmmfFLmnCCWFFl\nPpNwtRsNsZSsRwCfzQQBfQszCBsC\nPpwcqqVZRtbggggjcgJJ\nntczBcVcgnHzgBHnVntcBBFhgsmmmssqWNWNWqLvNhsqTN\nbSSGdSDZbGSGdDmLmGTvTGmLFFhm\nPlFbDpJDPbPdPbZQZDZlSCDBfMVRwBzBtBQzfzRHVMVRtH\nfDVrmmrvcmCcVpfcfGlswpPwsttMpjJMPPjjtP\nRgSTdndFLbJqqPssWWjPWjPjHS\nFqgzQnTqJRRQqLLhTCDhDCDmcmlvvlhcVm\nnnqVtHbfVHZVmtlvmHtZtrFSFTRRFhRccTbrLsLSGr\ncCNJQJPJQgjjMQdDrGGsRhTFGFRFSpMS\ngzdCwWdjNPgzcJgjwdZtVlHHmvvmZlvffHnz\nFFgsgwNwWvggQsMWDwvQQvQcccdcJZDtJGBtVGGGtcVlzt\nrjfTrbjpjRSRTbTpzldjjHBtJGBdltJG\nRbrPTfpCfmbpmnfRRCvMvQWNBwFFgMsgBL\nzzLHgjjjdFHWbGBjjzcbgQRmSvqsSpmRsRSQSmRMWv\nZfJVrwPhZhZlhQQqBSQSNSqM\ntnCfrDCltfPzHFFLBgngHz\nDCpwrrMhwCrCMVCpGFqpVDnWWTWBtnTWvWfvbbTdFWRv\nlmhhcsQPmTtTnnPBTB\nQmcjNJsJzHNljZsNqDCGGhwqCqhgDDZV\nhLfRnSLfhcndCCPfJJjzJfzt\npHNWwDpGGNJBZjjNNj\ngmgwwHpWTpmGDmDTggqHmmDSsnnhvcqScdVVSVcjLrRcnq\nCdlTJgnQJVCllNVWTPZBmPPGhGRmghPRGs\nwHDrSwtHbmhRvHVZ\nDzzwrtVFjLNnMTCTLCWW\nSppdsnGpNVnZZZLPMlMPGq\nmdcfvTTbBddLJgZJLlcFqJ\nfzTvfwjjfzzCbvvjvQjWvNHVNNVWrRtdnVNppNprDp\nlmlCGTmNbZlbSFlbNGfnzWfWzCdWWfVdwRCf\njDHtHHvLjQtqrsqpjBBLprRzwfwJfzzhRnczhWQVwzVR\nrqpPtpPjDqpqDLtLrPGGFSFgPlNZZSGMPnMZ\npSHShqgSMzVpphFnJMFMBtssdjRJ\nPZDbZfmCDgDfDNQPwCflCQNJsjRBRBFsdBWBsJRjsbsFJF\nDQvCwwZrPPlffDmQCDwZQPmPhqVTcGhSHSLTpSGhLHzpGghr\ngPqgqqmmmPgsqvGmsMCCnfZZfvBpWZhVrrZdHBvH\nTSlcttTjRTDlDDTRhZVdrHHpWVnfVrtd\nSFJzFzcJjcRJwGGqJMMCwW\ngzWNLSjRLzlNqqQMLhvQccGGmcQm\nfFrttPdTFTrpVwGpbdVQQp\nHnTBGfHTGzWWqCqngn\nSddrLdVpjjVSgRBszFswzwlV\nmtPMbMqPMvqHHHDTTglBvsFshFFg\nbmBHbtPctMtbMNMtbPtPqHmMjpdZdcJGrjSWWZGjJZnjndWj\nnljWJHRHGrDcMBbDLZHV\nwdvwmhghhbtBMcLtwZ\ngvQvvghTfPSmpmQljGFRjQbFGCsJbC\nBmphBWmDBBQfpVgQZpjg\nrqqGrrrqlnqqHqjNnVDSSSgQQffj\nFqLrbsLFsbLbLqHlMrmwwPDcCmMMmJBwDJcC\nwZccfslqZPFFjrFbFfQQ\nvvTvVWCJJZVBWCSvnVJJrhjQVMjVjzbgMQbjpphh\nBBmNWBvZRvSqwsGwssPcmc\nLGpnfcnzfzQdNFNHqHJptq\nRBNNvZSBRbRCCDJqHrDZqHFZtw\nSRNhRsNhWSNWsRRvgjngQnnMTnTgQjGMff\ntwtZmwqBHtmqnnmlGLfcfvQQ\ndgMSPSMdQGclRRdF\npVMrDgThDDlPWPWbBZtZqqttBqjqjT\nPPSWCGSzpCCQwNsNPFhTNVbB\nvqcgJngqLLcZLvBhNTVlbsvdFF\nDDmHgRjHZhHtGfWpQH\nsBLbwWWBvsBsqLqStRjcGGRnggjGcntJDn\nNCMQPMQPMQNzGGRRgRJRGzcG\ndHQNfPCFTQfFfVVNvwwJvSWSqWqrSqdS\nprDBnnDpFDprnDPBDQBvpBZttcSqSZSZcScFJSHcZJtz\nVhMVdLsjdqVWJSWZZZcHst\nhLVdGLfqjGjlfhCfCLjTTmrlpQBPBmvnrgDgpp\nSSSTJmmgbGwtmRZHCCZRCH\nFWcPQrrWqflzSWpRHZCZHRSt\nPSQzzdcQTghdndDJ\ncLlrNPvljRhRgTlM\nVmDBGnVdmJDnDBndnnVwDRvMgRsTbTzMMsgZghzzsB\nSpHvmGnSDJnwvDQqfrCPLpPLCfpF\nPppbRCCgpzzQCgCSgZTlNNTWnNNDNlRnGl\nhwMhLtBcBdjjNzWzlclcNGTs\nFjJFHJwhfwLHMLJLwPmqfQPgVCmQgCmCzC\njTtMqFjMBqBmTntTztBTnTZBRZRLpLJgDgJNhghJrNNhhLJh\nDCDdvdGsVDVsflVdQSsfSwhRJlgppgpRpbWLgJbJpgbR\nwfSHSsdSVvQSwfwQPQPqHtFDcMzmtjBntqMTqn\nHQhQWLCSHCSCjnjQdSJdCSQgTTmZPTVZmqnTpPtnpmRmpp\nvDrzhvGzfchvlGvMFMrqVqPgZVVtZtVRgZgm\nbcvMfwvDsDfbvfwDbbdhCShWCBLLJWjHsHjj\nzLSsJNCjsjLCNLCgGcwBPPdwBwqwqz\nWMFZprZDbrddWRVRRDvlPPBcPhhlBqqHPGPhhffg\nVdbFvZWWWZZDFTLtCmNntjTnLSnn\nJLVhhwRbhVwcLFJFhhJcccqwsvpRlllvpWvZSBSSSRsNWpzl\njgzfPffgZNspgZQS\nfjCmDCGnfmTfFqrFnhqbFzqt\nSfMRRNHSNNLfRfHcRRsqwdCCsssTqBCvgBLv\nllDDWQnFGtQnmtGQDWQFsgdHVBddndHsgqTsCTsg\nGzGjpWmWbmQmbpGGmGjHSrZcMfZSRPJPfcMRcb\nPDdMdRTRrLDSwzJvfSvJ\nFnjQnsqsFTnStvplhhzzFS\nTBHHCsgVRRcMHbLR\nGcLdGBJvBvLJHccJBvqHpGzDFfzwfzjwhDwrSFpfpDSn\nmZZrTTQVmQmlsMPVblZQVZmfCwjzzjChzCCbDSzhFjfnSb\ngZlRlZNPlmlgTTPmNRvJWcqrNLdvHWLBcHtH\njWWbBwgwWwwtvvSCtHvgWsMFmscHzTGMmcssGFTTGz\nZrLtpLnlfQJqnfJtpLnZlrqdNNGqcDNNFFTNDzzMMTMsMNMs\nLJQrnZnfLZnlrZflJJRVRQbbwBgCtCVjWgjBjjgbPjBB\nfqQVfRqSqmpnlLnm\njFcjMJTjhwwggjFtgzCHmCzCmGzGlzpn\nwstMFFjWDfQRvmDPSB\nPgTFGPgcBZPcHPFBZRjGPgwCnmwCsmSdQdThmMMMQCQS\nJbpvWtvfHblWDHJDzmndSdMQnSwCdhMdQD\nrfvWlLlbtfJvvLJpqWbbqZRRGPVFNHVFgZNVFBgH\nTRMrrGBLMLPtbssTGtBHwZmdQQbdNzzZZNZZdwjd\nCVlVhCnclvhWSFFfQrWNrjmpNfwmjZ\nrlqFlclChhCvnlDvgVvRRtPtqTGJHRMBRTPPqM\ngZzCrQGQdrQvZHPTHWDbTgWPJM\nnSpLlcnnVjsSVLLnLSnhLSsJPTTWFsqfbPMFMqJDbfqM\nVwwnpwLnlPdQCwPPCC\nlRlrnlrsrMlhVsRnVhGPvCFNcPBDBvccrCGr\nRZQTzWTRdDNvBDdNcC\nTqjZbWRHmlMJgnmsng\nscQmLfQBQQvvZfLsmmvDJwpgSNSDDdcJSSwTGD\nPHlMbtzCCnlbztMRzlPNNdNwGpDpwgwptNLGpw\nrRHnLbhCzbbCHnHjMbzzjzFZmfQqWZQqvmhmfVZmqFBW\nfLTQWTMQtjcCGCJCbf\ngGsmsVSzmjCFHJCJgg\nSPRsSwSvBsPRPsqzwSVqzmhVWtLWhTDNLlTDtLTWGpNMtDLt\nmbzRbchRRQzzssLdhLggLddJ\nDCqDNNNWvDvjcPLsJcLLdv\ncpFCVNnVBHtbfFRtMRFf\nPFRcCCPtsDDDtjVspgwmgTNpTgTpspsw\nBqqqdJdHdMgSfMmZpZND\nvDHJGdLbLzBJdGnDdrBqVtCzWPPhthtPFzzPCFtV\nHvhvHdFdvJDfHdZdpfhrmGPljPRrGPPVDGrWWC\nNMMsRBMzcRRMMBSzcnbmNGrCVCWrCqPClmPqlG\nzLBbwMzQnRSQMThtZFLvpdgHtJfF\nDpcJcJPmMcLSHHZCfpnH\nBsBFvvqTFlbhgdbBBblfZLCLzfHWfjnjLCnCrh\ndTsNgqFvNgsGlZJRtVtMPmtDmG\nLdGQqzPGCCjJTJdTLJQJtFcFRSctcrFNFltPFtcc\nHphMMbbMdBMHbBhhgHMnhvwFFvtrlSNRNgcRllcvcc\nspHMhBnHnnsmWdnsnMBMdVGGmzjzLmZLDQCCCCZjqjTD\nDDZMzcTRgDMLzqCffhfWfcWnfj\nNsHVVJmswwSSwNPPNjnhqhnCCnhNvjfTnv\nrSSddrGSGrlMrpTpQT\nbbbfCfrLHMMMWVWC\nSqsvNZqQvvqcjNvqZsMMwgFgFplTHQVRFgWH\nBSZWWqBZBjmPGJGLbBtf\nRNCNfzfRHmzHwSdRdGfzRJPqFcFcDFGccZZqtLtGLtgl\npjhVMhvhbjvPcDJvcZqt\nbsQMTsjppmSdTnHSJH\nPtLwpSwdSJwQnGvvqtvMhZ\nTlFcHlTjVjsDTQnCQhbZGCVVnb\ncjljTslTrlzzHDNRfNgLSNBJfBwNfG\nHvsZZqqqwWZswWHTmHsvvfhSfBfDffjchfBbhD\nMCpnCVpQClRNnlNQVQClfDhScmjBfLhmLDGbBNbS\ngmtpJpQQllJnWdZWwJWFwJJT\nTzBvBwwdhgRPGHlRHh\nNLWttJsrLWttppLpsGlsmVbVGRljGDRgjV\nMlllnNFnnQqCdzqq\nvptzrJhMMGGMptJPhJGJPvdFTFcSsTBVsczBScTSFFfn\ngbRjWgRjCqjZnfHCHnTSVBHF\nmRwqNbmqlbbjqRNlLbNrDJntNDGtDhNpGMrpvJ\nGPWZLgWqLHHGbgbbGPPmqHqfcjjRHJJBDRBRjBBjMHjwvwQc\ndhpFSpzVSSMSlDBvMQ\nTndsVNztVTspnsdpshtmZLPCGGNPfgqbWWfDGb\nCbqDjjCdClqgrfJvrv\nNGNPtGGzzHztPWWnlgJvfBnWBFgp\nhGzNHhsmGccwHPHZHcwdCCdbTVRTvSmTCjbLCb\nsqnqsHGpJbqnrbshpshHmmmCWZZmWwfTjTjHmfLZ\ndPggRgSDDttMFgctgdDtDcDcRWJBmjTWwmRLBLfmwBBjZWTB\nPFcVPlJPglbqhhrnnlNz\nwZdDNDdPPfhqwWqbsF\nVTngRzpnzMLvzTCLlhvDfltqqDttqFqs\nmggTVpCDDSNjBmPZrd\ncSdqJSTTTJcSJpCdQbqTCPPdjdDtGzwzjDwjwwwwzD\nrVvsBBVgsVBhHhfljtgbPgGtWjPtwt\nfvHsVZHVnRHpSJJRmbbSLT\nlDDPRRjwLGlvVRDRPlwwwPvmpSfhVWSzhqfzqpHpVpVHfqSH\nqBnqBNsBBChhCSfZ\nnTQbQnNNQJTLvlmTPLqqmG\nTTCJhDrmDpRVhvhHfffwzwfz\ndmmdmglWcqvHvWsHzB\ngdQMZbtlgQlZcMSttCNmVVrLSTTJ\nPLZLqhZZzZLBjjjGrrPjMH\nCcQcCcfRlWDjdrMrBrHC\nWlWFMcFpcRFmsWFcmflqSJzTqzwLvshggsZJwz\nLgqRDDDHHGTpgpJrQrQhhhCqrwPw\nZSBWjjFshCFlQDrJ\nSjWnnbWtWnsztgGDDbDTGgHHGp\nllfvMlvzjzGzGRfvMSGRfSdStrCtQNCZrrFdJJLnNtLZ\nshhhshPHsTTqsBHTVTwTwZZnCtQrQnJtQCCJBCCZdZ\nTPHTPTHmDnljplfpGfGm\nqcNTmvvSvTNrWhRrTdthzW\nbDVJphpMMJwJpMHtrrttWsgwtzRW\nbFpGJbllPfplVQmnhvvcSmCFqq\nGTPJGMQTPQMqZjHTBmnndBVddHrrzNrz\nbbcRFgDpptRbffwmzmrvLmcZvmLmLv\nWCwgWbpgwtgfpfMlQGPhSPZWTZPl\nDsPCswsMPBMwPDCVJPnTPPWFGJNJmbJW\nRvvddfvftdtvNzghGSbFnWTntJSttGbG\nLNgRddgRlgzcgCDjjjHjcBCwcM\ngnVtgBnpwBgShBgcwhJJhjCMMMDmLRjDRMjrDMMMDMqMRF\nslsblHPNHlbTNbsPvszHQWbzqrZLMRmFMFmdFmrtDFdMLNZD\nbPzfvbfsvvlHtlzPHllHGTlTppCJpgcngcpwnwCGGJnnShwV\ncgQRgtzDbHPcgHzQWpTjTLdjjNNpNLsDss\nnwccZBmwcJqmJnjsTvmlTSsdlTNs\nCCGFCBVrBwwGBhqVnZBrqWMMQzHfQcHzzzPtfztGfg\nlhnwnhlbgbngbcfDgJLJQqDdVd\nFSrvtMFZVJJJVtcq\njZNNNNjmjSPjFTJmGGzswwzHwHpBsbPblhhW\ntnDWHntzDtzQBZLMLzNLDDcRFFjhJBmcFRCTjRchcRvT\nsqwsPlbGfSbPGSVbJfpjjhcTFmCRjjvmTTvRdw\nlJqSqPVbgGSGrVSqJqflbWZQNDMLHnrQQWNDMtQMQz\nlpltwwJqsWVLPtVt\nDGHsDdZQzHLSLZcFRrFS\nBGsGCnHmMlMwCfwT\nnrRNzRMPrrPnNwNzTSFSTNtqZdtMttvQqQmjdjvZpgjZ\nGWVhGcGhHhGcffbZGDmmtttQvpdtbpppdj\nHGlHBhHGJfJJhCfZzLTTNnNrTnCNwT\njBpCZStjBwWrQCMrhw\nTvcHBzHdPPzdvFTzzJlvzdQfThrhhrhfQTWMQfWMqfwf\nbzGJJBJcJvdvBPFzddGgjZSbZZngRZNNnnsjRs\ndqPqbpPFJfsFfMcNQNNtNmzrNQJn\nVVBDWvwZWDLwGlDhLGWWVcmQtSNmLmtSdSSTmrcQQm\nlZlhwDCdhhHllvWvjMHbgMpgffMggpPb\nSWSFLLFWDSWDNFzmmLMfGlfsdfnJMBfwMGVnBf\nvPtgZcctcTQQZRRcgCtZwRfqBVGqnVTBGVnqlsdBJnqV\nRcjgwbbgNSbFbhDb\nJrRZLrHvjQFPLnnBPQ\nDhwbtHbzpcpFTgtQ\nzlDwlHlzWSwDqhMMbSJVZVvrCrCZJZNZdJ\nfgNCZSDtDfDZTrTfqWghQGzGQshgpGGFQg\nRFvLnvFjnVjmLQGPQWLmWh\nMdwwVMFbMdRHFbccbCZJtbDJrqqJZNJZCZ\nfdZVBMMdfdfBCzhTzMdMCgCrGGrpQJmSmGJGmpJQVpLmqV\nRbFnhNsvlDsFHttllGmqGpPLvJpmPJSqLL\ntjNsDnNwbNjttNNZTzhMWzcZcMTwMd\nDjSSMShjRjPCbDFCdCSDbpBBswfNWZBZZrBVBPNfVmVf\nzltLjLqqGlzQntqqGztqcgncZrVrmNfNwWBVrVmrgwrfswsW\nqcTqHLlnJzGznLJtHGhMbhjFhMMpFbpbThpp\nZVFZcctFQzsCtbZFnPPHqmqpwmvPmp\nNrjGfMgcLLcfdLqpmRwRRqJJmdPw\nLMNDgMBGlgGDLMNDGljctVbVWZTTCWChhTttsl\nRMGRRhhgzgZMtHdGTtvDwDJFCDvvwdvwqFFv\nrfrrjLNmmSnSjVSmNNPPbJVbqvqsqvhvFqCq\nflrpnSlrSNfjrNjSphNSWlHRGzTgtQGHQtttBTRBRQHW\ntplDDprhbvprvrJDprCpbsvHRfzSzTtzmRqSTznRRBRnSfFF\nMVwWjVNVQGfcMnTmRnBm\nVQwGLNLjWNWPGjZbsDBppBZhhDvBlZ\nRVVrGVVchRZsnzRzBWZb\nFQHWWCHwQmWmlqfCHSwJnsbNJnNsvttntBtb\nQQSFgqgqLMLPPdWdMVhWDT\ncZrMjncTdfJpPJbr\nWHNqnQwwCwvlqHtCtHNslNlvLLPDfSVdVPVDVSfVSbftffVf\nNCwwwQwllwnvgsvZzgzFZzBzjGGGMM\nMvHpfzcTcZzpphhbsDSTStsltqSDtS\nPRmnwCrWnWQrmNMRNnlNGbqlbDltdlbDtNtD\nCRJnmRVWJfgMLvcz\nHPFbHrrwLdVdgbDZqcphCqSZBhLZ\ntQRfRRGtvTNNSGTMjjmDCRhmqpBChqhsRDZh\nvjSfMzGQNQQnMtNTTWNNjgblFdFHwgdJJHHPwddgnr\nBggPRVBPPgfCBmJTjTTqpTNpZBwMbr\nlclLLllsQLFlsbMqNrMwTpwpcM\nSvbDzSDbWFJfWPPgdnfR\nGbpSSbGDNbSSJbDZNZbDppGtMntHLHvHCTLCJMHnRCMLTT\ncdwddjBfPsmPPQqQqscnHgRMtngvtjjgCCTMzM\nWvwPvWvflBwdQPlNVVhbDGpFhNGhbl\nWZRGmRvpCRFTZMQQQMCdddDDcD\nlqgqsgvjVtbMDzzbtcDQ\nNsNNgjNNjsNhnSvRmnpGRmSTSG\nnTgFtDTDDLrFBStdGdcHcbvGSc\nQPzfPCMzWCjfMPJhWGlRbRWRWrRRdVVH\nzhCrCQCjPrpNNBsNspNnwq\nzTJpqFzbTzsWsVbbfLGfSSCDNSBCHfMLHG\nrZcvtmhctrvmlPPmmmrhhmBLCHDCCLLDlqMlGMNDMwDC\nrRhRhnnQPZhtZcZtdttZgqFWWVjssqQpppWpFpJW\nNWPhdWJPWVzVqQrqmSsPbrPP\ncZDRjGsffGsCDfffgjGgRQSrTcTmSlTrbnqmSSrlln\nfFGCjGCjLDLFRgfDHZvzLVWtvsWWBtzJNWMB\nqMVbtnmMMTpCppsR\nNffHGrWzWWgDBfTRhChCnSCWcnjT\nQrlQBPBrlPHrrQlrHFLqPnLvVvbVmVVJtq\nMVMpHMZLVCpMrfWjvWnfrJ\nhlblzDDzwlSlGtRhRlSdrfGGWnWWfFPjJjnfqWGF\nlmlhBRlDhhhDRRhwDmBpHJmsNCHmCgNHJCJLsc\njvsLgmqLgHvbPPVbNjSCjC\npwTcRpRWLRMLJJFwBBGWcFWNVlDDCSTVttNPblZZCVVDlP\nGcdhccpcpRpGRhGmfsHHzLQQHrmsnh\nFMmSRgtMltMnVgnmNvlrsJrsZWjspvsZJp\nQbdhqwqbNqdHbTdcbcpsrpvjfWfLJLfwJrWp\nDQBBQqQGccdTPGqqBNtFGRSMRSFGtnVSnnmM\nfPjGrfFrrprprdrbQPZwlcZwZmlJwH\nqvNnvWnvWDvSvqNtWSLWStqbcJBQwQJwQZHLBZbcmJbblb\nDMtvqSvvDtntCRfwzGCgdzzFjG\nTfdZgtmfDgqgvlLFFsFHvcvZ\npphWQMVjQVVBWWjRlHlHnlcLDDhcnF\nJQwwWVPBwMJpJwpWwGBWNzrDzSSzfgTPqTSTTtSPgt")

(def PRIORITY (zipmap (str u/letters (str/upper-case u/letters)) (range 1 100)))

PRIORITY
(defn half [s] (-> s count (/ 2) (split-at s)))

(defn score [s] (->> s half (map set) (apply set/intersection) first PRIORITY))
(defn p1 [ss] (->> ss (str/split-lines) (map score) (reduce +)))

(assert (= 157 (p1 sample)))
(assert (= 7727 (p1 data)))

(defn p2 [ss]
  (->> ss (str/split-lines) (partition 3)
    (map #(->> % (map set) (apply set/intersection) first PRIORITY))
    (reduce +)))

(assert (= 70 (p2 sample)))
(assert (= 2609 (p2 data)))